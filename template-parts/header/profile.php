<?php

/**
 * Header profile block.
 *
 * @package WordPress
 * @subpackage inheart
 */

$meta		= get_user_meta( get_current_user_id() );
$fullname	= "{$meta['first_name'][0]} {$meta['last_name'][0]}";
?>

<div class="header-profile flex align-center justify-end">
	<button
		class="btn lg outlined save-memory-page-progress"
		data-redirect="<?php echo get_the_permalink( pll_get_post( ih_get_profile_page_id() ) ) ?>"
	>
		<?php _e( 'Зберегти та Закрити', 'inheart' ) ?>
	</button>

	<button class="header-profile-button flex align-center" type="button" aria-label="<?php esc_attr_e( 'Відкрити меню профілю', 'inheart' ) ?>">
		<svg class="header-profile-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M0.5 13.4922C0.5 13.0822 0.667765 12.6902 0.964286 12.4071L1.44048 11.9526C5.11151 8.44842 10.8885 8.44842 14.5595 11.9526L15.0357 12.4071C15.3322 12.6902 15.5 13.0822 15.5 13.4922V14C15.5 14.8284 14.8284 15.5 14 15.5H2C1.17157 15.5 0.5 14.8284 0.5 14V13.4922Z" stroke="#F7B941"/>
			<circle cx="8" cy="4" r="3.5" stroke="#F7B941"/>
		</svg>
		<span class="hide-before-md"><?php echo esc_html( $fullname ) ?></span>
		<svg class="header-profile-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
			<g id="Navigation / arrow drop_up">
				<mask id="mask0_1564_33234" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="9" width="8" height="6">
					<g id="Icon Mask">
						<path id="Round" d="M15.2934 11.4134L12.7034 14.0034C12.3134 14.3934 11.6834 14.3934 11.2934 14.0034L8.70337 11.4134C8.07337 10.7834 8.52337 9.7034 9.41337 9.7034L14.5934 9.7034C15.4834 9.7034 15.9234 10.7834 15.2934 11.4134Z" fill="black"/>
					</g>
				</mask>
				<g mask="url(#mask0_1564_33234)">
					<rect id="Color Fill" x="24" y="24" width="24" height="24" transform="rotate(-180 24 24)" fill="currentColor"/>
				</g>
			</g>
		</svg>
	</button>

	<ul class="header-profile-dropdown">
		<li class="header-profile-dropdown-item">
			<a href="<?php echo get_the_permalink( pll_get_post( ih_get_profile_page_id() ) ) ?>" class="flex align-center">
			<span class="header-profile-dropdown-icon">
				<svg class="header-profile-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M0.5 13.4922C0.5 13.0822 0.667765 12.6902 0.964286 12.4071L1.44048 11.9526C5.11151 8.44842 10.8885 8.44842 14.5595 11.9526L15.0357 12.4071C15.3322 12.6902 15.5 13.0822 15.5 13.4922V14C15.5 14.8284 14.8284 15.5 14 15.5H2C1.17157 15.5 0.5 14.8284 0.5 14V13.4922Z" stroke="#F7B941"/>
					<circle cx="8" cy="4" r="3.5" stroke="#F7B941"/>
				</svg>
			</span>
				<?php esc_html_e( 'Особистий кабінет', 'inheart' ) ?>
			</a>
		</li>
		<li class="header-profile-dropdown-item">
			<a href="<?php echo get_the_permalink( pll_get_post( ih_get_settings_page_id() ) ) ?>" class="flex align-center">
			<span class="header-profile-dropdown-icon">
				<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M1.91099 7.38266C2.28028 6.24053 2.88863 5.19213 3.69133 4.30364C3.82707 4.15339 4.04002 4.09984 4.23069 4.16802L6.14897 4.85392C6.66905 5.03977 7.24131 4.76883 7.42716 4.24875C7.44544 4.19762 7.45952 4.14507 7.46925 4.09173L7.83471 2.08573C7.87104 1.88627 8.02422 1.7285 8.22251 1.6863C8.8027 1.5628 9.39758 1.5 10.0003 1.5C10.6026 1.5 11.1971 1.56273 11.7769 1.68607C11.9752 1.72824 12.1284 1.88591 12.1648 2.08529L12.5313 4.09165C12.6303 4.63497 13.1511 4.9951 13.6944 4.89601C13.7479 4.88627 13.8004 4.87219 13.8515 4.85395L15.7698 4.16802C15.9605 4.09984 16.1734 4.15339 16.3092 4.30364C17.1119 5.19213 17.7202 6.24053 18.0895 7.38266C18.1518 7.57534 18.0918 7.78658 17.9374 7.91764L16.3825 9.23773C15.9615 9.5952 15.9101 10.2263 16.2675 10.6473C16.3027 10.6887 16.3411 10.7271 16.3825 10.7623L17.9374 12.0824C18.0918 12.2134 18.1518 12.4247 18.0895 12.6173C17.7202 13.7595 17.1119 14.8079 16.3092 15.6964C16.1734 15.8466 15.9605 15.9002 15.7698 15.832L13.8515 15.1461C13.3315 14.9602 12.7592 15.2312 12.5733 15.7512C12.5551 15.8024 12.541 15.8549 12.5312 15.9085L12.1648 17.9147C12.1284 18.1141 11.9752 18.2718 11.7769 18.3139C11.1971 18.4373 10.6026 18.5 10.0003 18.5C9.39758 18.5 8.8027 18.4372 8.22251 18.3137C8.02422 18.2715 7.87104 18.1137 7.83471 17.9143L7.46926 15.9084C7.37018 15.365 6.8494 15.0049 6.30608 15.104C6.25265 15.1137 6.20011 15.1278 6.14906 15.1461L4.23069 15.832C4.04002 15.9002 3.82707 15.8466 3.69133 15.6964C2.88863 14.8079 2.28028 13.7595 1.91099 12.6173C1.84869 12.4247 1.90876 12.2134 2.06313 12.0824L3.61798 10.7623C4.03897 10.4048 4.09046 9.77373 3.73299 9.35274C3.69784 9.31135 3.65937 9.27288 3.618 9.23775L2.06313 7.91764C1.90876 7.78658 1.84869 7.57534 1.91099 7.38266ZM2.97154 7.37709L4.26523 8.47546C4.34803 8.54576 4.42496 8.62269 4.49526 8.70548C5.2102 9.54746 5.10721 10.8096 4.26521 11.5246L2.97154 12.6229C3.26359 13.4051 3.68504 14.1322 4.21648 14.7751L5.81246 14.2044C5.91473 14.1679 6.01982 14.1397 6.12667 14.1202C7.21332 13.922 8.25487 14.6423 8.45305 15.729L8.75702 17.3975C9.16489 17.4655 9.58024 17.5 10.0003 17.5C10.42 17.5 10.8351 17.4656 11.2427 17.3976L11.5475 15.7289C11.567 15.6221 11.5951 15.517 11.6317 15.4147C12.0034 14.3746 13.1479 13.8327 14.1881 14.2044L15.784 14.7751C16.3155 14.1322 16.7369 13.4051 17.029 12.6229L15.7353 11.5245C15.6525 11.4542 15.5756 11.3773 15.5053 11.2945C14.7903 10.4525 14.8933 9.1904 15.7353 8.47544L17.029 7.37709C16.7369 6.59486 16.3155 5.86783 15.784 5.22494L14.1881 5.79559C14.0858 5.83214 13.9807 5.8603 13.8738 5.87979C12.7872 6.07796 11.7456 5.3577 11.5475 4.27119L11.2427 2.60235C10.8351 2.53443 10.42 2.5 10.0003 2.5C9.58024 2.5 9.16489 2.53448 8.75702 2.60249L8.45304 4.27105C8.43355 4.37791 8.40539 4.48299 8.36884 4.58527C7.99714 5.62542 6.8526 6.1673 5.81237 5.79556L4.21648 5.22494C3.68504 5.86783 3.26359 6.59486 2.97154 7.37709ZM7.50026 10C7.50026 8.61929 8.61954 7.5 10.0003 7.5C11.381 7.5 12.5003 8.61929 12.5003 10C12.5003 11.3807 11.381 12.5 10.0003 12.5C8.61954 12.5 7.50026 11.3807 7.50026 10ZM8.50026 10C8.50026 10.8284 9.17183 11.5 10.0003 11.5C10.8287 11.5 11.5003 10.8284 11.5003 10C11.5003 9.17157 10.8287 8.5 10.0003 8.5C9.17183 8.5 8.50026 9.17157 8.50026 10Z" fill="#F7B941"/>
				</svg>
			</span>
				<?php esc_html_e( 'Налаштування', 'inheart' ) ?>
			</a>
		</li>
		<li class="header-profile-dropdown-item">
			<a href="<?php echo wp_logout_url( home_url( '/login' ) ); ?>" class="logout flex align-center">
			<span class="header-profile-dropdown-icon">
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M6.5 9.25C6.91421 9.25 7.25 8.91422 7.25 8.5C7.25 8.08579 6.91421 7.75 6.5 7.75C6.08579 7.75 5.75 8.08579 5.75 8.5C5.75 8.91422 6.08579 9.25 6.5 9.25ZM9 1.5C9 1.3542 8.93636 1.21567 8.82575 1.12068C8.71514 1.02569 8.56857 0.983714 8.42445 1.00574L1.42445 2.07574C1.18032 2.11306 1 2.32303 1 2.57V13.43C1 13.6769 1.18028 13.8869 1.42438 13.9243L8.42438 14.9953C8.56851 15.0173 8.71509 14.9754 8.82572 14.8804C8.93635 14.7854 9 14.6468 9 14.501V8.00002L14.1722 8.00002L13.1753 8.87372C12.9679 9.05556 12.9468 9.37144 13.1284 9.57926C13.3099 9.78708 13.6253 9.80814 13.8328 9.6263L15.8295 7.8763C15.9379 7.78135 16 7.64419 16 7.50001C16 7.35583 15.9379 7.21867 15.8295 7.12372L13.8328 5.37372C13.6253 5.19188 13.3099 5.21294 13.1284 5.42076C12.9468 5.62858 12.9679 5.94446 13.1753 6.1263L14.1723 7.00002L9 7.00002V1.5ZM8 2.08224V13.9187L2 13.0007V2.99938L8 2.08224ZM10.5 14H10V9H11V13.5C11 13.7761 10.7761 14 10.5 14ZM10 6V2H10.5C10.7761 2 11 2.22386 11 2.5V6H10Z" fill="#F74141"/>
				</svg>
			</span>
				<?php esc_html_e( 'Вийти з профилю', 'inheart' ) ?>
			</a>
		</li>
	</ul><!-- .header-profile-dropdown -->
</div><!-- .header-profile -->

