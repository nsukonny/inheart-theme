/*! For license information please see new-memory.min.js.LICENSE.txt */
!function(){var t={918:function(t,e,n){var o,i,r;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}r=function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function e(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var s="undefined"!=typeof window&&void 0!==window.document,c=s?window:{},l=!(!s||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,d=!!s&&"PointerEvent"in c,h="cropper",u="all",p="crop",f="move",m="zoom",v="e",g="w",y="s",b="n",w="ne",S="nw",x="se",E="sw",L="".concat(h,"-crop"),D="".concat(h,"-disabled"),C="".concat(h,"-hidden"),M="".concat(h,"-hide"),k="".concat(h,"-invisible"),O="".concat(h,"-modal"),T="".concat(h,"-move"),q="".concat(h,"Action"),_="".concat(h,"Preview"),N="crop",A="move",I="none",P="crop",j="cropend",H="cropmove",B="cropstart",Y="dblclick",R=d?"pointerdown":l?"touchstart":"mousedown",X=d?"pointermove":l?"touchmove":"mousemove",W=d?"pointerup pointercancel":l?"touchend touchcancel":"mouseup",z="ready",F="resize",U="wheel",J="zoom",G="image/jpeg",V=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Z=/^data:/,$=/^data:image\/jpeg;base64,/,Q=/^img|canvas$/i,K={viewMode:0,dragMode:N,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},tt=Number.isNaN||c.isNaN;function et(t){return"number"==typeof t&&!tt(t)}var nt=function(t){return t>0&&t<1/0};function ot(t){return void 0===t}function it(t){return"object"===n(t)&&null!==t}var rt=Object.prototype.hasOwnProperty;function at(t){if(!it(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&rt.call(n,"isPrototypeOf")}catch(t){return!1}}function st(t){return"function"==typeof t}var ct=Array.prototype.slice;function lt(t){return Array.from?Array.from(t):ct.call(t)}function dt(t,e){return t&&st(e)&&(Array.isArray(t)||et(t.length)?lt(t).forEach((function(n,o){e.call(t,n,o,t)})):it(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var ht=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return it(t)&&n.length>0&&n.forEach((function(e){it(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},ut=/\.\d*(?:0|9){12}\d*$/;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ut.test(t)?Math.round(t*e)/e:t}var ft=/^width|height|left|top|marginLeft|marginTop$/;function mt(t,e){var n=t.style;dt(e,(function(t,e){ft.test(e)&&et(t)&&(t="".concat(t,"px")),n[e]=t}))}function vt(t,e){if(e)if(et(t.length))dt(t,(function(t){vt(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function gt(t,e){e&&(et(t.length)?dt(t,(function(t){gt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function yt(t,e,n){e&&(et(t.length)?dt(t,(function(t){yt(t,e,n)})):n?vt(t,e):gt(t,e))}var bt=/([a-z\d])([A-Z])/g;function wt(t){return t.replace(bt,"$1-$2").toLowerCase()}function St(t,e){return it(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(wt(e)))}function xt(t,e,n){it(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(wt(e)),n)}var Et=/\s\s*/,Lt=function(){var t=!1;if(s){var e=!1,n=function(){},o=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});c.addEventListener("test",n,o),c.removeEventListener("test",n,o)}return t}();function Dt(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;e.trim().split(Et).forEach((function(e){if(!Lt){var r=t.listeners;r&&r[e]&&r[e][n]&&(i=r[e][n],delete r[e][n],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,i,o)}))}function Ct(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;e.trim().split(Et).forEach((function(e){if(o.once&&!Lt){var r=t.listeners,a=void 0===r?{}:r;i=function(){delete a[e][n],t.removeEventListener(e,i,o);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];n.apply(t,s)},a[e]||(a[e]={}),a[e][n]&&t.removeEventListener(e,a[e][n],o),a[e][n]=i,t.listeners=a}t.addEventListener(e,i,o)}))}function Mt(t,e,n){var o;return st(Event)&&st(CustomEvent)?o=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(o)}function kt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ot=c.location,Tt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function qt(t){var e=t.match(Tt);return null!==e&&(e[1]!==Ot.protocol||e[2]!==Ot.hostname||e[3]!==Ot.port)}function _t(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Nt(t){var e=t.rotate,n=t.scaleX,o=t.scaleY,i=t.translateX,r=t.translateY,a=[];et(i)&&0!==i&&a.push("translateX(".concat(i,"px)")),et(r)&&0!==r&&a.push("translateY(".concat(r,"px)")),et(e)&&0!==e&&a.push("rotate(".concat(e,"deg)")),et(n)&&1!==n&&a.push("scaleX(".concat(n,")")),et(o)&&1!==o&&a.push("scaleY(".concat(o,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function At(t,n){var o=t.pageX,i=t.pageY,r={endX:o,endY:i};return n?r:e({startX:o,startY:i},r)}function It(t){var e=t.aspectRatio,n=t.height,o=t.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=nt(o),a=nt(n);if(r&&a){var s=n*e;"contain"===i&&s>o||"cover"===i&&s<o?n=o/e:o=n*e}else r?n=o/e:a&&(o=n*e);return{width:o,height:n}}var Pt=String.fromCharCode,jt=/^data:.*,/;var Ht={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,o=this.cropper,i=Number(e.minContainerWidth),r=Number(e.minContainerHeight);vt(o,C),gt(t,C);var a={width:Math.max(n.offsetWidth,i>=0?i:200),height:Math.max(n.offsetHeight,r>=0?r:100)};this.containerData=a,mt(o,{width:a.width,height:a.height}),vt(t,C),gt(o,C)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,o=Math.abs(e.rotate)%180==90,i=o?e.naturalHeight:e.naturalWidth,r=o?e.naturalWidth:e.naturalHeight,a=i/r,s=t.width,c=t.height;t.height*a>t.width?3===n?s=t.height*a:c=t.width/a:3===n?c=t.width/a:s=t.height*a;var l={aspectRatio:a,naturalWidth:i,naturalHeight:r,width:s,height:c};this.canvasData=l,this.limited=1===n||2===n,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=ht({},l)},limitCanvas:function(t,e){var n=this.options,o=this.containerData,i=this.canvasData,r=this.cropBoxData,a=n.viewMode,s=i.aspectRatio,c=this.cropped&&r;if(t){var l=Number(n.minCanvasWidth)||0,d=Number(n.minCanvasHeight)||0;a>1?(l=Math.max(l,o.width),d=Math.max(d,o.height),3===a&&(d*s>l?l=d*s:d=l/s)):a>0&&(l?l=Math.max(l,c?r.width:0):d?d=Math.max(d,c?r.height:0):c&&(l=r.width,(d=r.height)*s>l?l=d*s:d=l/s));var h=It({aspectRatio:s,width:l,height:d});l=h.width,d=h.height,i.minWidth=l,i.minHeight=d,i.maxWidth=1/0,i.maxHeight=1/0}if(e)if(a>(c?0:1)){var u=o.width-i.width,p=o.height-i.height;i.minLeft=Math.min(0,u),i.minTop=Math.min(0,p),i.maxLeft=Math.max(0,u),i.maxTop=Math.max(0,p),c&&this.limited&&(i.minLeft=Math.min(r.left,r.left+(r.width-i.width)),i.minTop=Math.min(r.top,r.top+(r.height-i.height)),i.maxLeft=r.left,i.maxTop=r.top,2===a&&(i.width>=o.width&&(i.minLeft=Math.min(0,u),i.maxLeft=Math.max(0,u)),i.height>=o.height&&(i.minTop=Math.min(0,p),i.maxTop=Math.max(0,p))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=o.width,i.maxTop=o.height},renderCanvas:function(t,e){var n=this.canvasData,o=this.imageData;if(e){var i=function(t){var e=t.width,n=t.height,o=t.degree;if(90==(o=Math.abs(o)%180))return{width:n,height:e};var i=o%90*Math.PI/180,r=Math.sin(i),a=Math.cos(i),s=e*a+n*r,c=e*r+n*a;return o>90?{width:c,height:s}:{width:s,height:c}}({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),r=i.width,a=i.height,s=n.width*(r/n.naturalWidth),c=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(c-n.height)/2,n.width=s,n.height=c,n.aspectRatio=r/a,n.naturalWidth=r,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,mt(this.canvas,ht({width:n.width,height:n.height},Nt({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,o=n.naturalWidth*(e.width/e.naturalWidth),i=n.naturalHeight*(e.height/e.naturalHeight);ht(n,{width:o,height:i,left:(e.width-o)/2,top:(e.height-i)/2}),mt(this.image,ht({width:n.width,height:n.height},Nt(ht({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,o=Number(t.autoCropArea)||.8,i={width:e.width,height:e.height};n&&(e.height*n>e.width?i.height=i.width/n:i.width=i.height*n),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*o),i.height=Math.max(i.minHeight,i.height*o),i.left=e.left+(e.width-i.width)/2,i.top=e.top+(e.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=ht({},i)},limitCropBox:function(t,e){var n=this.options,o=this.containerData,i=this.canvasData,r=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(t){var c=Number(n.minCropBoxWidth)||0,l=Number(n.minCropBoxHeight)||0,d=a?Math.min(o.width,i.width,i.width+i.left,o.width-i.left):o.width,h=a?Math.min(o.height,i.height,i.height+i.top,o.height-i.top):o.height;c=Math.min(c,o.width),l=Math.min(l,o.height),s&&(c&&l?l*s>c?l=c/s:c=l*s:c?l=c/s:l&&(c=l*s),h*s>d?h=d/s:d=h*s),r.minWidth=Math.min(c,d),r.minHeight=Math.min(l,h),r.maxWidth=d,r.maxHeight=h}e&&(a?(r.minLeft=Math.max(0,i.left),r.minTop=Math.max(0,i.top),r.maxLeft=Math.min(o.width,i.left+i.width)-r.width,r.maxTop=Math.min(o.height,i.top+i.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=o.width-r.width,r.maxTop=o.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&xt(this.face,q,n.width>=e.width&&n.height>=e.height?f:u),mt(this.cropBox,ht({width:n.width,height:n.height},Nt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Mt(this.element,P,this.getData())}},Bt={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,o=e?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=o,r.alt=i,this.viewBox.appendChild(r),this.viewBoxImage=r,n){var a=n;"string"==typeof n?a=t.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,dt(a,(function(t){var n=document.createElement("img");xt(t,_,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=o,n.alt=i,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){dt(this.previews,(function(t){var e=St(t,_);mt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(it(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(wt(e)))}(t,_)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,o=n.width,i=n.height,r=t.width,a=t.height,s=n.left-e.left-t.left,c=n.top-e.top-t.top;this.cropped&&!this.disabled&&(mt(this.viewBoxImage,ht({width:r,height:a},Nt(ht({translateX:-s,translateY:-c},t)))),dt(this.previews,(function(e){var n=St(e,_),l=n.width,d=n.height,h=l,u=d,p=1;o&&(u=i*(p=l/o)),i&&u>d&&(h=o*(p=d/i),u=d),mt(e,{width:h,height:u}),mt(e.getElementsByTagName("img")[0],ht({width:r*p,height:a*p},Nt(ht({translateX:-s*p,translateY:-c*p},t))))})))}},Yt={bind:function(){var t=this.element,e=this.options,n=this.cropper;st(e.cropstart)&&Ct(t,B,e.cropstart),st(e.cropmove)&&Ct(t,H,e.cropmove),st(e.cropend)&&Ct(t,j,e.cropend),st(e.crop)&&Ct(t,P,e.crop),st(e.zoom)&&Ct(t,J,e.zoom),Ct(n,R,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Ct(n,U,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ct(n,Y,this.onDblclick=this.dblclick.bind(this)),Ct(t.ownerDocument,X,this.onCropMove=this.cropMove.bind(this)),Ct(t.ownerDocument,W,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Ct(window,F,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;st(e.cropstart)&&Dt(t,B,e.cropstart),st(e.cropmove)&&Dt(t,H,e.cropmove),st(e.cropend)&&Dt(t,j,e.cropend),st(e.crop)&&Dt(t,P,e.crop),st(e.zoom)&&Dt(t,J,e.zoom),Dt(n,R,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Dt(n,U,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Dt(n,Y,this.onDblclick),Dt(t.ownerDocument,X,this.onCropMove),Dt(t.ownerDocument,W,this.onCropEnd),e.responsive&&Dt(window,F,this.onResize)}},Rt={resize:function(){if(!this.disabled){var t,e,n=this.options,o=this.container,i=this.containerData,r=o.offsetWidth/i.width,a=o.offsetHeight/i.height,s=Math.abs(r-1)>Math.abs(a-1)?r:a;1!==s&&(n.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(dt(t,(function(e,n){t[n]=e*s}))),this.setCropBoxData(dt(e,(function(t,n){e[n]=t*s})))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===I||this.setDragMode((t=this.dragBox,e=L,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?A:N))},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(et(e)&&1!==e||et(n)&&0!==n||t.ctrlKey))){var o,i=this.options,r=this.pointers;t.changedTouches?dt(t.changedTouches,(function(t){r[t.identifier]=At(t)})):r[t.pointerId||0]=At(t),o=Object.keys(r).length>1&&i.zoomable&&i.zoomOnTouch?m:St(t.target,q),V.test(o)&&!1!==Mt(this.element,B,{originalEvent:t,action:o})&&(t.preventDefault(),this.action=o,this.cropping=!1,o===p&&(this.cropping=!0,vt(this.dragBox,O)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==Mt(this.element,H,{originalEvent:t,action:e})&&(t.changedTouches?dt(t.changedTouches,(function(t){ht(n[t.identifier]||{},At(t,!0))})):ht(n[t.pointerId||0]||{},At(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?dt(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,yt(this.dragBox,O,this.cropped&&this.options.modal)),Mt(this.element,j,{originalEvent:t,action:e}))}}},Xt={change:function(t){var n,o=this.options,i=this.canvasData,r=this.containerData,a=this.cropBoxData,s=this.pointers,c=this.action,l=o.aspectRatio,d=a.left,h=a.top,L=a.width,D=a.height,M=d+L,k=h+D,O=0,T=0,q=r.width,_=r.height,N=!0;!l&&t.shiftKey&&(l=L&&D?L/D:1),this.limited&&(O=a.minLeft,T=a.minTop,q=O+Math.min(r.width,i.width,i.left+i.width),_=T+Math.min(r.height,i.height,i.top+i.height));var A=s[Object.keys(s)[0]],I={x:A.endX-A.startX,y:A.endY-A.startY},P=function(t){switch(t){case v:M+I.x>q&&(I.x=q-M);break;case g:d+I.x<O&&(I.x=O-d);break;case b:h+I.y<T&&(I.y=T-h);break;case y:k+I.y>_&&(I.y=_-k)}};switch(c){case u:d+=I.x,h+=I.y;break;case v:if(I.x>=0&&(M>=q||l&&(h<=T||k>=_))){N=!1;break}P(v),(L+=I.x)<0&&(c=g,d-=L=-L),l&&(D=L/l,h+=(a.height-D)/2);break;case b:if(I.y<=0&&(h<=T||l&&(d<=O||M>=q))){N=!1;break}P(b),D-=I.y,h+=I.y,D<0&&(c=y,h-=D=-D),l&&(L=D*l,d+=(a.width-L)/2);break;case g:if(I.x<=0&&(d<=O||l&&(h<=T||k>=_))){N=!1;break}P(g),L-=I.x,d+=I.x,L<0&&(c=v,d-=L=-L),l&&(D=L/l,h+=(a.height-D)/2);break;case y:if(I.y>=0&&(k>=_||l&&(d<=O||M>=q))){N=!1;break}P(y),(D+=I.y)<0&&(c=b,h-=D=-D),l&&(L=D*l,d+=(a.width-L)/2);break;case w:if(l){if(I.y<=0&&(h<=T||M>=q)){N=!1;break}P(b),D-=I.y,h+=I.y,L=D*l}else P(b),P(v),I.x>=0?M<q?L+=I.x:I.y<=0&&h<=T&&(N=!1):L+=I.x,I.y<=0?h>T&&(D-=I.y,h+=I.y):(D-=I.y,h+=I.y);L<0&&D<0?(c=E,h-=D=-D,d-=L=-L):L<0?(c=S,d-=L=-L):D<0&&(c=x,h-=D=-D);break;case S:if(l){if(I.y<=0&&(h<=T||d<=O)){N=!1;break}P(b),D-=I.y,h+=I.y,L=D*l,d+=a.width-L}else P(b),P(g),I.x<=0?d>O?(L-=I.x,d+=I.x):I.y<=0&&h<=T&&(N=!1):(L-=I.x,d+=I.x),I.y<=0?h>T&&(D-=I.y,h+=I.y):(D-=I.y,h+=I.y);L<0&&D<0?(c=x,h-=D=-D,d-=L=-L):L<0?(c=w,d-=L=-L):D<0&&(c=E,h-=D=-D);break;case E:if(l){if(I.x<=0&&(d<=O||k>=_)){N=!1;break}P(g),L-=I.x,d+=I.x,D=L/l}else P(y),P(g),I.x<=0?d>O?(L-=I.x,d+=I.x):I.y>=0&&k>=_&&(N=!1):(L-=I.x,d+=I.x),I.y>=0?k<_&&(D+=I.y):D+=I.y;L<0&&D<0?(c=w,h-=D=-D,d-=L=-L):L<0?(c=x,d-=L=-L):D<0&&(c=S,h-=D=-D);break;case x:if(l){if(I.x>=0&&(M>=q||k>=_)){N=!1;break}P(v),D=(L+=I.x)/l}else P(y),P(v),I.x>=0?M<q?L+=I.x:I.y>=0&&k>=_&&(N=!1):L+=I.x,I.y>=0?k<_&&(D+=I.y):D+=I.y;L<0&&D<0?(c=S,h-=D=-D,d-=L=-L):L<0?(c=E,d-=L=-L):D<0&&(c=w,h-=D=-D);break;case f:this.move(I.x,I.y),N=!1;break;case m:this.zoom(function(t){var n=e({},t),o=0;return dt(t,(function(t,e){delete n[e],dt(n,(function(e){var n=Math.abs(t.startX-e.startX),i=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),s=Math.sqrt(n*n+i*i),c=(Math.sqrt(r*r+a*a)-s)/s;Math.abs(c)>Math.abs(o)&&(o=c)}))})),o}(s),t),N=!1;break;case p:if(!I.x||!I.y){N=!1;break}n=kt(this.cropper),d=A.startX-n.left,h=A.startY-n.top,L=a.minWidth,D=a.minHeight,I.x>0?c=I.y>0?x:w:I.x<0&&(d-=L,c=I.y>0?E:S),I.y<0&&(h-=D),this.cropped||(gt(this.cropBox,C),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}N&&(a.width=L,a.height=D,a.left=d,a.top=h,this.action=c,this.renderCropBox()),dt(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Wt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&vt(this.dragBox,O),gt(this.cropBox,C),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ht({},this.initialImageData),this.canvasData=ht({},this.initialCanvasData),this.cropBoxData=ht({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ht(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),gt(this.dragBox,O),vt(this.cropBox,C)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,dt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,gt(this.cropper,D)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,vt(this.cropper,D)),this},destroy:function(){var t=this.element;return t[h]?(t[h]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,o=n.left,i=n.top;return this.moveTo(ot(t)?t:o+Number(t),ot(e)?e:i+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(et(t)&&(n.left=t,o=!0),et(e)&&(n.top=e,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var o=this.options,i=this.canvasData,r=i.width,a=i.height,s=i.naturalWidth,c=i.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&o.zoomable){var l=s*t,d=c*t;if(!1===Mt(this.element,J,{ratio:t,oldRatio:r/s,originalEvent:n}))return this;if(n){var h=this.pointers,u=kt(this.cropper),p=h&&Object.keys(h).length?function(t){var e=0,n=0,o=0;return dt(t,(function(t){var i=t.startX,r=t.startY;e+=i,n+=r,o+=1})),{pageX:e/=o,pageY:n/=o}}(h):{pageX:n.pageX,pageY:n.pageY};i.left-=(l-r)*((p.pageX-u.left-i.left)/r),i.top-=(d-a)*((p.pageY-u.top-i.top)/a)}else at(e)&&et(e.x)&&et(e.y)?(i.left-=(l-r)*((e.x-i.left)/r),i.top-=(d-a)*((e.y-i.top)/a)):(i.left-=(l-r)/2,i.top-=(d-a)/2);i.width=l,i.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return et(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,et(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(et(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(et(t)&&(n.scaleX=t,o=!0),et(e)&&(n.scaleY=e,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,o=this.imageData,i=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-i.left,y:r.top-i.top,width:r.width,height:r.height};var a=o.width/o.naturalWidth;if(dt(t,(function(e,n){t[n]=e/a})),e){var s=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=o.rotate||0),n.scalable&&(t.scaleX=o.scaleX||1,t.scaleY=o.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,o=this.canvasData,i={};if(this.ready&&!this.disabled&&at(t)){var r=!1;e.rotatable&&et(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,r=!0),e.scalable&&(et(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,r=!0),et(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;et(t.x)&&(i.left=t.x*a+o.left),et(t.y)&&(i.top=t.y*a+o.top),et(t.width)&&(i.width=t.width*a),et(t.height)&&(i.height=t.height*a),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?ht({},this.containerData):{}},getImageData:function(){return this.sized?ht({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&dt(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&at(t)&&(et(t.left)&&(e.left=t.left),et(t.top)&&(e.top=t.top),et(t.width)?(e.width=t.width,e.height=t.width/n):et(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,o=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&at(t)&&(et(t.left)&&(o.left=t.left),et(t.top)&&(o.top=t.top),et(t.width)&&t.width!==o.width&&(e=!0,o.width=t.width),et(t.height)&&t.height!==o.height&&(n=!0,o.height=t.height),i&&(e?o.height=o.width/i:n&&(o.width=o.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=function(t,e,n,o){var i=e.aspectRatio,a=e.naturalWidth,s=e.naturalHeight,c=e.rotate,l=void 0===c?0:c,d=e.scaleX,h=void 0===d?1:d,u=e.scaleY,p=void 0===u?1:u,f=n.aspectRatio,m=n.naturalWidth,v=n.naturalHeight,g=o.fillColor,y=void 0===g?"transparent":g,b=o.imageSmoothingEnabled,w=void 0===b||b,S=o.imageSmoothingQuality,x=void 0===S?"low":S,E=o.maxWidth,L=void 0===E?1/0:E,D=o.maxHeight,C=void 0===D?1/0:D,M=o.minWidth,k=void 0===M?0:M,O=o.minHeight,T=void 0===O?0:O,q=document.createElement("canvas"),_=q.getContext("2d"),N=It({aspectRatio:f,width:L,height:C}),A=It({aspectRatio:f,width:k,height:T},"cover"),I=Math.min(N.width,Math.max(A.width,m)),P=Math.min(N.height,Math.max(A.height,v)),j=It({aspectRatio:i,width:L,height:C}),H=It({aspectRatio:i,width:k,height:T},"cover"),B=Math.min(j.width,Math.max(H.width,a)),Y=Math.min(j.height,Math.max(H.height,s)),R=[-B/2,-Y/2,B,Y];return q.width=pt(I),q.height=pt(P),_.fillStyle=y,_.fillRect(0,0,I,P),_.save(),_.translate(I/2,P/2),_.rotate(l*Math.PI/180),_.scale(h,p),_.imageSmoothingEnabled=w,_.imageSmoothingQuality=x,_.drawImage.apply(_,[t].concat(r(R.map((function(t){return Math.floor(pt(t))}))))),_.restore(),q}(this.image,this.imageData,e,t);if(!this.cropped)return n;var o=this.getData(),i=o.x,a=o.y,s=o.width,c=o.height,l=n.width/Math.floor(e.naturalWidth);1!==l&&(i*=l,a*=l,s*=l,c*=l);var d=s/c,h=It({aspectRatio:d,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=It({aspectRatio:d,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=It({aspectRatio:d,width:t.width||(1!==l?n.width:s),height:t.height||(1!==l?n.height:c)}),f=p.width,m=p.height;f=Math.min(h.width,Math.max(u.width,f)),m=Math.min(h.height,Math.max(u.height,m));var v=document.createElement("canvas"),g=v.getContext("2d");v.width=pt(f),v.height=pt(m),g.fillStyle=t.fillColor||"transparent",g.fillRect(0,0,f,m);var y=t.imageSmoothingEnabled,b=void 0===y||y,w=t.imageSmoothingQuality;g.imageSmoothingEnabled=b,w&&(g.imageSmoothingQuality=w);var S,x,E,L,D,C,M=n.width,k=n.height,O=i,T=a;O<=-s||O>M?(O=0,S=0,E=0,D=0):O<=0?(E=-O,O=0,D=S=Math.min(M,s+O)):O<=M&&(E=0,D=S=Math.min(s,M-O)),S<=0||T<=-c||T>k?(T=0,x=0,L=0,C=0):T<=0?(L=-T,T=0,C=x=Math.min(k,c+T)):T<=k&&(L=0,C=x=Math.min(c,k-T));var q=[O,T,S,x];if(D>0&&C>0){var _=f/s;q.push(E*_,L*_,D*_,C*_)}return g.drawImage.apply(g,[n].concat(r(q.map((function(t){return Math.floor(pt(t))}))))),v},setAspectRatio:function(t){var e=this.options;return this.disabled||ot(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var i=t===N,r=e.movable&&t===A;t=i||r?t:I,e.dragMode=t,xt(n,q,t),yt(n,L,i),yt(n,T,r),e.cropBoxMovable||(xt(o,q,t),yt(o,L,i),yt(o,T,r))}return this}},zt=c.Cropper,Ft=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!Q.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=ht({},K,at(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,n,i;return e=t,i=[{key:"noConflict",value:function(){return window.Cropper=zt,t}},{key:"setDefaults",value:function(t){ht(K,at(t)&&t)}}],(n=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e[h]){if(e[h]=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var n=this.element,o=this.options;if(o.rotatable||o.scalable||(o.checkOrientation=!1),o.checkOrientation&&window.ArrayBuffer)if(Z.test(t))$.test(t)?this.read((i=t.replace(jt,""),r=atob(i),a=new ArrayBuffer(r.length),dt(s=new Uint8Array(a),(function(t,e){s[e]=r.charCodeAt(e)})),a)):this.clone();else{var i,r,a,s,c=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=l,c.onerror=l,c.ontimeout=l,c.onprogress=function(){c.getResponseHeader("content-type")!==G&&c.abort()},c.onload=function(){e.read(c.response)},c.onloadend=function(){e.reloading=!1,e.xhr=null},o.checkCrossOrigin&&qt(t)&&n.crossOrigin&&(t=_t(t)),c.open("GET",t,!0),c.responseType="arraybuffer",c.withCredentials="use-credentials"===n.crossOrigin,c.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,o=function(t){var e,n=new DataView(t);try{var o,i,r;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){i=s;break}s+=1}if(i){var c=i+10;if("Exif"===function(t,e,n){var o="";n+=e;for(var i=e;i<n;i+=1)o+=Pt(t.getUint8(i));return o}(n,i+4,4)){var l=n.getUint16(c);if(((o=18761===l)||19789===l)&&42===n.getUint16(c+2,o)){var d=n.getUint32(c+4,o);d>=8&&(r=c+d)}}}if(r){var h,u,p=n.getUint16(r,o);for(u=0;u<p;u+=1)if(h=r+12*u+2,274===n.getUint16(h,o)){h+=8,e=n.getUint16(h,o),n.setUint16(h,1,o);break}}}catch(t){e=1}return e}(t),i=0,r=1,a=1;if(o>1){this.url=function(t,e){for(var n=[],o=new Uint8Array(t);o.length>0;)n.push(Pt.apply(null,lt(o.subarray(0,8192)))),o=o.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}(t,G);var s=function(t){var e=0,n=1,o=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:o=-1;break;case 5:e=90,o=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:o}}(o);i=s.rotate,r=s.scaleX,a=s.scaleY}e.rotatable&&(n.rotate=i),e.scalable&&(n.scaleX=r,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,o=e;this.options.checkCrossOrigin&&qt(e)&&(n||(n="anonymous"),o=_t(e)),this.crossOrigin=n,this.crossOriginUrl=o;var i=document.createElement("img");n&&(i.crossOrigin=n),i.src=o||e,i.alt=t.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),vt(i,M),t.parentNode.insertBefore(i,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),o=function(e,n){ht(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.initialImageData=ht({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var i=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){o(i.width,i.height),n||r.removeChild(i)},i.src=e.src,n||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i))}else o(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,o=t.parentNode,i=document.createElement("div");i.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=i.querySelector(".".concat(h,"-container")),a=r.querySelector(".".concat(h,"-canvas")),s=r.querySelector(".".concat(h,"-drag-box")),c=r.querySelector(".".concat(h,"-crop-box")),l=c.querySelector(".".concat(h,"-face"));this.container=o,this.cropper=r,this.canvas=a,this.dragBox=s,this.cropBox=c,this.viewBox=r.querySelector(".".concat(h,"-view-box")),this.face=l,a.appendChild(n),vt(t,C),o.insertBefore(r,t.nextSibling),gt(n,M),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,vt(c,C),e.guides||vt(c.getElementsByClassName("".concat(h,"-dashed")),C),e.center||vt(c.getElementsByClassName("".concat(h,"-center")),C),e.background&&vt(r,"".concat(h,"-bg")),e.highlight||vt(l,k),e.cropBoxMovable&&(vt(l,T),xt(l,q,u)),e.cropBoxResizable||(vt(c.getElementsByClassName("".concat(h,"-line")),C),vt(c.getElementsByClassName("".concat(h,"-point")),C)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),st(e.ready)&&Ct(t,z,e.ready,{once:!0}),Mt(t,z)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),gt(this.element,C)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();return ht(Ft.prototype,Ht,Bt,Yt,Rt,Xt,Wt),Ft},"object"===a(e)?t.exports=r():void 0===(i="function"==typeof(o=r)?o.call(e,n,e,t):o)||(t.exports=i)}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return n};var n={},o=Object.prototype,i=o.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function h(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),s=new M(o||[]);return r(a,"_invoke",{value:E(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var p={};function f(){}function m(){}function v(){}var g={};d(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==o&&i.call(b,s)&&(g=b);var w=v.prototype=f.prototype=Object.create(g);function S(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function x(e,n){function o(r,a,s,c){var l=u(e[r],e,a);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==t(h)&&i.call(h,"__await")?n.resolve(h.__await).then((function(t){o("next",t,s,c)}),(function(t){o("throw",t,s,c)})):n.resolve(h).then((function(t){d.value=t,s(d)}),(function(t){return o("throw",t,s,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,i){o(t,e,n,i)}))}return a=a?a.then(i,i):i()}})}function E(t,e,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return{value:void 0,done:!0}}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=u(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function L(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=u(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function k(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=v,r(w,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=d(v,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,d(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},n.awrap=function(t){return{__await:t}},S(x.prototype),d(x.prototype,c,(function(){return this})),n.AsyncIterator=x,n.async=function(t,e,o,i,r){void 0===r&&(r=Promise);var a=new x(h(t,e,o,i),r);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(w),d(w,l,"Generator"),d(w,s,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=k,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},n}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,n,o){return(n=function(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function a(t,e,n,o,i,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,i)}var s,c=window.wpData.ajaxUrl,l=!1,d=function(){return l},h=function(t){return l=t},u=function(){var t,n=(t=e().mark((function t(n){var o,r,a=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=i(i({method:"post"},a.length>1&&void 0!==a[1]?a[1]:{}),{},{body:n}),t.next=4,fetch(c,o);case 4:return r=t.sent,t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function s(t){a(r,o,i,s,c,"next",t)}function c(t){a(r,o,i,s,c,"throw",t)}s(void 0)}))});return function(t){return n.apply(this,arguments)}}(),p=function(t){return s=document.querySelector(t)},f=function(){return s},m=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Дійсно видалити фото?";if(!document.querySelector(".popup-sure")){var i='<div class="popup-sure">\n\t\t<div class="popup-sure-text">'.concat(o,'</div>\n\t\t<div class="popup-sure-buttons flex flex-wrap">\n\t\t\t<button class="popup-sure-cancel" type="button">Залишити</button>\n\t\t\t<button class="popup-sure-apply" type="button">Видалити</button>\n\t\t</div>\n\t</div>');t.insertAdjacentHTML("beforeend",i),document.querySelector(".popup-sure-cancel").addEventListener("click",e),document.querySelector(".popup-sure-apply").addEventListener("click",n)}},v=function(){var t=document.querySelector(".popup-sure");t&&t.remove()},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please set the text",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("div");n.className="notification ".concat(e),n.innerText=t,document.body.querySelector(".wrapper").appendChild(n),setTimeout((function(){n.classList.add("show")}),10),setTimeout((function(){n.classList.remove("show")}),5e3),setTimeout((function(){n.remove()}),5350)},y=function(t){t&&t.classList.contains("hidden")&&t.classList.remove("hidden")},b=function(t){t&&!t.classList.contains("hidden")&&t.classList.add("hidden")},w=function(){var t=document.querySelector(".new-memory-theme.active");return!!t&&(localStorage.setItem("ih-step-0",JSON.stringify({theme:t.dataset.value})),!0)},S=n(918),x=n.n(S),E=!1;if("undefined"!=typeof window){var L={get passive(){E=!0}};window.addEventListener("testPassive",null,L),window.removeEventListener("testPassive",null,L)}var D,C="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),M=[],k=!1,O=-1,T=void 0,q=void 0,_=function(t){return M.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},N=function(t){var e=t||window.event;return!!_(e.target)||e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1)},A=function(t,e){if(t){if(!M.some((function(e){return e.targetElement===t}))){var n={targetElement:t,options:e||{}};M=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(M),[n]),C?(t.ontouchstart=function(t){1===t.targetTouches.length&&(O=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var n=t.targetTouches[0].clientY-O;!_(t.target)&&(e&&0===e.scrollTop&&n>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&n<0?N(t):t.stopPropagation())}(e,t)},k||(document.addEventListener("touchmove",N,E?{passive:!1}:void 0),k=!0)):function(t){if(void 0===q){var e=!!t&&!0===t.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;e&&n>0&&(q=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===T&&(T=document.body.style.overflow,document.body.style.overflow="hidden")}(e)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},I=function(t){t?(M=M.filter((function(e){return e.targetElement!==t})),C?(t.ontouchstart=null,t.ontouchmove=null,k&&0===M.length&&(document.removeEventListener("touchmove",N,E?{passive:!1}:void 0),k=!1)):M.length||(void 0!==q&&(document.body.style.paddingRight=q,q=void 0),void 0!==T&&(document.body.style.overflow=T,T=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")},P=localStorage.getItem("ih-step-1")?JSON.parse(localStorage.getItem("ih-step-1")):{lang:"uk"},j=function(){var t=document.querySelectorAll(".new-memory-main-info input"),e=!0;return!!t.length&&(P.lang=document.querySelector(".new-memory-lang.active").dataset.lang,t.forEach((function(t){var n=t.name,o=t.value;(t.classList.contains("error")||t.required&&!o)&&(e=!1),P[n]=o})),localStorage.setItem("ih-step-1",JSON.stringify(P)),e)};function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(){return X=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},X.apply(this,arguments)}function W(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var z=W(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),F=W(/Edge/i),U=W(/firefox/i),J=W(/safari/i)&&!W(/chrome/i)&&!W(/android/i),G=W(/iP(ad|od|hone)/i),V=W(/chrome/i)&&W(/android/i),Z={capture:!1,passive:!1};function $(t,e,n){t.addEventListener(e,n,!z&&Z)}function Q(t,e,n){t.removeEventListener(e,n,!z&&Z)}function K(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function tt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function et(t,e,n,o){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&K(t,e):K(t,e))||o&&t===n)return t;if(t===n)break}while(t=tt(t))}return null}var nt,ot=/\s+/g;function it(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(ot," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(ot," ")}}function rt(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||-1!==e.indexOf("webkit")||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function at(t,e){var n="";if("string"==typeof t)n=t;else do{var o=rt(t,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function st(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function ct(){return document.scrollingElement||document.documentElement}function lt(t,e,n,o,i){if(t.getBoundingClientRect||t===window){var r,a,s,c,l,d,h;if(t!==window&&t.parentNode&&t!==ct()?(a=(r=t.getBoundingClientRect()).top,s=r.left,c=r.bottom,l=r.right,d=r.height,h=r.width):(a=0,s=0,c=window.innerHeight,l=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!z))do{if(i&&i.getBoundingClientRect&&("none"!==rt(i,"transform")||n&&"static"!==rt(i,"position"))){var u=i.getBoundingClientRect();a-=u.top+parseInt(rt(i,"border-top-width")),s-=u.left+parseInt(rt(i,"border-left-width")),c=a+r.height,l=s+r.width;break}}while(i=i.parentNode);if(o&&t!==window){var p=at(i||t),f=p&&p.a,m=p&&p.d;p&&(c=(a/=m)+(d/=m),l=(s/=f)+(h/=f))}return{top:a,left:s,bottom:c,right:l,width:h,height:d}}}function dt(t,e,n){for(var o=mt(t,!0),i=lt(t)[e];o;){var r=lt(o)[n];if(!("top"===n||"left"===n?i>=r:i<=r))return o;if(o===ct())break;o=mt(o,!1)}return!1}function ht(t,e,n,o){for(var i=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==ge.ghost&&(o||a[r]!==ge.dragged)&&et(a[r],n.draggable,t,!1)){if(i===e)return a[r];i++}r++}return null}function ut(t,e){for(var n=t.lastElementChild;n&&(n===ge.ghost||"none"===rt(n,"display")||e&&!K(n,e));)n=n.previousElementSibling;return n||null}function pt(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===ge.clone||e&&!K(t,e)||n++;return n}function ft(t){var e=0,n=0,o=ct();if(t)do{var i=at(t),r=i.a,a=i.d;e+=t.scrollLeft*r,n+=t.scrollTop*a}while(t!==o&&(t=t.parentNode));return[e,n]}function mt(t,e){if(!t||!t.getBoundingClientRect)return ct();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=rt(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return ct();if(o||e)return n;o=!0}}}while(n=n.parentNode);return ct()}function vt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function gt(t,e){return function(){if(!nt){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),nt=setTimeout((function(){nt=void 0}),e)}}}function yt(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function bt(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var wt="Sortable"+(new Date).getTime();var St=[],xt={initializeByDefault:!0},Et={mount:function(t){for(var e in xt)xt.hasOwnProperty(e)&&!(e in t)&&(t[e]=xt[e]);St.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),St.push(t)},pluginEvent:function(t,e,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=t+"Global";St.forEach((function(o){e[o.pluginName]&&(e[o.pluginName][i]&&e[o.pluginName][i](B({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](B({sortable:e},n)))}))},initializePlugins:function(t,e,n,o){for(var i in St.forEach((function(o){var i=o.pluginName;if(t.options[i]||o.initializeByDefault){var r=new o(t,e,t.options);r.sortable=t,r.options=t.options,t[i]=r,X(n,r.defaults)}})),t.options)if(t.options.hasOwnProperty(i)){var r=this.modifyOption(t,i,t.options[i]);void 0!==r&&(t.options[i]=r)}},getEventProperties:function(t,e){var n={};return St.forEach((function(o){"function"==typeof o.eventProperties&&X(n,o.eventProperties.call(e[o.pluginName],t))})),n},modifyOption:function(t,e,n){var o;return St.forEach((function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(o=i.optionListeners[e].call(t[i.pluginName],n))})),o}};var Lt=["evt"],Dt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=function(t,e){if(null==t)return{};var n,o,i=function(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(n,Lt);Et.pluginEvent.bind(ge)(t,e,B({dragEl:Mt,parentEl:kt,ghostEl:Ot,rootEl:Tt,nextEl:qt,lastDownEl:_t,cloneEl:Nt,cloneHidden:At,dragStarted:Jt,putSortable:Yt,activeSortable:ge.active,originalEvent:o,oldIndex:It,oldDraggableIndex:jt,newIndex:Pt,newDraggableIndex:Ht,hideGhostForTarget:pe,unhideGhostForTarget:fe,cloneNowHidden:function(){At=!0},cloneNowShown:function(){At=!1},dispatchSortableEvent:function(t){Ct({sortable:e,name:t,originalEvent:o})}},i))};function Ct(t){!function(t){var e=t.sortable,n=t.rootEl,o=t.name,i=t.targetEl,r=t.cloneEl,a=t.toEl,s=t.fromEl,c=t.oldIndex,l=t.newIndex,d=t.oldDraggableIndex,h=t.newDraggableIndex,u=t.originalEvent,p=t.putSortable,f=t.extraEventProperties;if(e=e||n&&n[wt]){var m,v=e.options,g="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||z||F?(m=document.createEvent("Event")).initEvent(o,!0,!0):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=i||n,m.clone=r,m.oldIndex=c,m.newIndex=l,m.oldDraggableIndex=d,m.newDraggableIndex=h,m.originalEvent=u,m.pullMode=p?p.lastPutMode:void 0;var y=B(B({},f),Et.getEventProperties(o,e));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),v[g]&&v[g].call(e,m)}}(B({putSortable:Yt,cloneEl:Nt,targetEl:Mt,rootEl:Tt,oldIndex:It,oldDraggableIndex:jt,newIndex:Pt,newDraggableIndex:Ht},t))}var Mt,kt,Ot,Tt,qt,_t,Nt,At,It,Pt,jt,Ht,Bt,Yt,Rt,Xt,Wt,zt,Ft,Ut,Jt,Gt,Vt,Zt,$t,Qt=!1,Kt=!1,te=[],ee=!1,ne=!1,oe=[],ie=!1,re=[],ae="undefined"!=typeof document,se=G,ce=F||z?"cssFloat":"float",le=ae&&!V&&!G&&"draggable"in document.createElement("div"),de=function(){if(ae){if(z)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),he=function(t,e){var n=rt(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=ht(t,0,e),r=ht(t,1,e),a=i&&rt(i),s=r&&rt(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+lt(i).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+lt(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!r||"both"!==s.clear&&s.clear!==d?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||c>=o&&"none"===n[ce]||r&&"none"===n[ce]&&c+l>o)?"vertical":"horizontal"},ue=function(t){function e(t,n){return function(o,i,r,a){var s=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(o,i,r,a),n)(o,i,r,a);var c=(n?o:i).options.group.name;return!0===t||"string"==typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var n={},o=t.group;o&&"object"==Y(o)||(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},pe=function(){!de&&Ot&&rt(Ot,"display","none")},fe=function(){!de&&Ot&&rt(Ot,"display","")};ae&&!V&&document.addEventListener("click",(function(t){if(Kt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Kt=!1,!1}),!0);var me=function(t){if(Mt){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,r=t.clientY,te.some((function(t){var e=t[wt].options.emptyInsertThreshold;if(e&&!ut(t)){var n=lt(t),o=i>=n.left-e&&i<=n.right+e,s=r>=n.top-e&&r<=n.bottom+e;return o&&s?a=t:void 0}})),a);if(e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[wt]._onDragOver(n)}}var i,r,a},ve=function(t){Mt&&Mt.parentNode[wt]._isOutsideThisEl(t.target)};function ge(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=X({},e),t[wt]=this;var n,o,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return he(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ge.supportPointer&&"PointerEvent"in window&&!J,emptyInsertThreshold:5};for(var r in Et.initializePlugins(this,t,i),i)!(r in e)&&(e[r]=i[r]);for(var a in ue(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&le,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?$(t,"pointerdown",this._onTapStart):($(t,"mousedown",this._onTapStart),$(t,"touchstart",this._onTapStart)),this.nativeDraggable&&($(t,"dragover",this),$(t,"dragenter",this)),te.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),X(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==rt(t,"display")&&t!==ge.ghost){o.push({target:t,rect:lt(t)});var e=B({},o[o.length-1].rect);if(t.thisAnimationDuration){var n=at(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n);return-1}(o,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var i=!1,r=0;o.forEach((function(t){var n=0,o=t.target,a=o.fromRect,s=lt(o),c=o.prevFromRect,l=o.prevToRect,d=t.rect,h=at(o,!0);h&&(s.top-=h.f,s.left-=h.e),o.toRect=s,o.thisAnimationDuration&&vt(c,s)&&!vt(a,s)&&(d.top-s.top)/(d.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(n=function(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}(d,c,l,e.options)),vt(s,a)||(o.prevFromRect=a,o.prevToRect=s,n||(n=e.options.animation),e.animate(o,d,s,n)),n&&(i=!0,r=Math.max(r,n),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),n),o.thisAnimationDuration=n)})),clearTimeout(n),i?n=setTimeout((function(){"function"==typeof t&&t()}),r):"function"==typeof t&&t(),o=[]},animate:function(t,e,n,o){if(o){rt(t,"transition",""),rt(t,"transform","");var i=at(this.el),r=i&&i.a,a=i&&i.d,s=(e.left-n.left)/(r||1),c=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!c,rt(t,"transform","translate3d("+s+"px,"+c+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),rt(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),rt(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){rt(t,"transition",""),rt(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),o)}}}))}function ye(t,e,n,o,i,r,a,s){var c,l,d=t[wt],h=d.options.onMove;return!window.CustomEvent||z||F?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=n,c.draggedRect=o,c.related=i||e,c.relatedRect=r||lt(e),c.willInsertAfter=s,c.originalEvent=a,t.dispatchEvent(c),h&&(l=h.call(d,c,a)),l}function be(t){t.draggable=!1}function we(){ie=!1}function Se(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function xe(t){return setTimeout(t,0)}function Ee(t){return clearTimeout(t)}ge.prototype={constructor:ge,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Gt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Mt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,o=this.options,i=o.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,l=o.filter;if(function(t){re.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&re.push(o)}}(n),!Mt&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||o.disabled)&&!c.isContentEditable&&(this.nativeDraggable||!J||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=et(s,o.draggable,n,!1))&&s.animated||_t===s)){if(It=pt(s),jt=pt(s,o.draggable),"function"==typeof l){if(l.call(this,t,s,this))return Ct({sortable:e,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),Dt("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(l&&(l=l.split(",").some((function(o){if(o=et(c,o.trim(),n,!1))return Ct({sortable:e,rootEl:o,name:"filter",targetEl:s,fromEl:n,toEl:n}),Dt("filter",e,{evt:t}),!0}))))return void(i&&t.cancelable&&t.preventDefault());o.handle&&!et(c,o.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var o,i=this,r=i.el,a=i.options,s=r.ownerDocument;if(n&&!Mt&&n.parentNode===r){var c=lt(n);if(Tt=r,kt=(Mt=n).parentNode,qt=Mt.nextSibling,_t=n,Bt=a.group,ge.dragged=Mt,Rt={target:Mt,clientX:(e||t).clientX,clientY:(e||t).clientY},Ft=Rt.clientX-c.left,Ut=Rt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Mt.style["will-change"]="all",o=function(){Dt("delayEnded",i,{evt:t}),ge.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!U&&i.nativeDraggable&&(Mt.draggable=!0),i._triggerDragStart(t,e),Ct({sortable:i,name:"choose",originalEvent:t}),it(Mt,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){st(Mt,t.trim(),be)})),$(s,"dragover",me),$(s,"mousemove",me),$(s,"touchmove",me),$(s,"mouseup",i._onDrop),$(s,"touchend",i._onDrop),$(s,"touchcancel",i._onDrop),U&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Mt.draggable=!0),Dt("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(F||z))o();else{if(ge.eventCanceled)return void this._onDrop();$(s,"mouseup",i._disableDelayedDrag),$(s,"touchend",i._disableDelayedDrag),$(s,"touchcancel",i._disableDelayedDrag),$(s,"mousemove",i._delayedDragTouchMoveHandler),$(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&$(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Mt&&be(Mt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Q(t,"mouseup",this._disableDelayedDrag),Q(t,"touchend",this._disableDelayedDrag),Q(t,"touchcancel",this._disableDelayedDrag),Q(t,"mousemove",this._delayedDragTouchMoveHandler),Q(t,"touchmove",this._delayedDragTouchMoveHandler),Q(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?$(document,"pointermove",this._onTouchMove):$(document,e?"touchmove":"mousemove",this._onTouchMove):($(Mt,"dragend",this),$(Tt,"dragstart",this._onDragStart));try{document.selection?xe((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(Qt=!1,Tt&&Mt){Dt("dragStarted",this,{evt:e}),this.nativeDraggable&&$(document,"dragover",ve);var n=this.options;!t&&it(Mt,n.dragClass,!1),it(Mt,n.ghostClass,!0),ge.active=this,t&&this._appendGhost(),Ct({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Xt){this._lastX=Xt.clientX,this._lastY=Xt.clientY,pe();for(var t=document.elementFromPoint(Xt.clientX,Xt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Xt.clientX,Xt.clientY))!==e;)e=t;if(Mt.parentNode[wt]._isOutsideThisEl(t),e)do{if(e[wt]&&e[wt]._onDragOver({clientX:Xt.clientX,clientY:Xt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);fe()}},_onTouchMove:function(t){if(Rt){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,i=t.touches?t.touches[0]:t,r=Ot&&at(Ot,!0),a=Ot&&r&&r.a,s=Ot&&r&&r.d,c=se&&$t&&ft($t),l=(i.clientX-Rt.clientX+o.x)/(a||1)+(c?c[0]-oe[0]:0)/(a||1),d=(i.clientY-Rt.clientY+o.y)/(s||1)+(c?c[1]-oe[1]:0)/(s||1);if(!ge.active&&!Qt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ot){r?(r.e+=l-(Wt||0),r.f+=d-(zt||0)):r={a:1,b:0,c:0,d:1,e:l,f:d};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");rt(Ot,"webkitTransform",h),rt(Ot,"mozTransform",h),rt(Ot,"msTransform",h),rt(Ot,"transform",h),Wt=l,zt=d,Xt=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ot){var t=this.options.fallbackOnBody?document.body:Tt,e=lt(Mt,!0,se,!0,t),n=this.options;if(se){for($t=t;"static"===rt($t,"position")&&"none"===rt($t,"transform")&&$t!==document;)$t=$t.parentNode;$t!==document.body&&$t!==document.documentElement?($t===document&&($t=ct()),e.top+=$t.scrollTop,e.left+=$t.scrollLeft):$t=ct(),oe=ft($t)}it(Ot=Mt.cloneNode(!0),n.ghostClass,!1),it(Ot,n.fallbackClass,!0),it(Ot,n.dragClass,!0),rt(Ot,"transition",""),rt(Ot,"transform",""),rt(Ot,"box-sizing","border-box"),rt(Ot,"margin",0),rt(Ot,"top",e.top),rt(Ot,"left",e.left),rt(Ot,"width",e.width),rt(Ot,"height",e.height),rt(Ot,"opacity","0.8"),rt(Ot,"position",se?"absolute":"fixed"),rt(Ot,"zIndex","100000"),rt(Ot,"pointerEvents","none"),ge.ghost=Ot,t.appendChild(Ot),rt(Ot,"transform-origin",Ft/parseInt(Ot.style.width)*100+"% "+Ut/parseInt(Ot.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,i=n.options;Dt("dragStart",this,{evt:t}),ge.eventCanceled?this._onDrop():(Dt("setupClone",this),ge.eventCanceled||((Nt=bt(Mt)).removeAttribute("id"),Nt.draggable=!1,Nt.style["will-change"]="",this._hideClone(),it(Nt,this.options.chosenClass,!1),ge.clone=Nt),n.cloneId=xe((function(){Dt("clone",n),ge.eventCanceled||(n.options.removeCloneOnHide||Tt.insertBefore(Nt,Mt),n._hideClone(),Ct({sortable:n,name:"clone"}))})),!e&&it(Mt,i.dragClass,!0),e?(Kt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Q(document,"mouseup",n._onDrop),Q(document,"touchend",n._onDrop),Q(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,Mt)),$(document,"drop",n),rt(Mt,"transform","translateZ(0)")),Qt=!0,n._dragStartId=xe(n._dragStarted.bind(n,e,t)),$(document,"selectstart",n),Jt=!0,J&&rt(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,o,i,r=this.el,a=t.target,s=this.options,c=s.group,l=ge.active,d=Bt===c,h=s.sort,u=Yt||l,p=this,f=!1;if(!ie){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=et(a,s.draggable,r,!0),O("dragOver"),ge.eventCanceled)return f;if(Mt.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return q(!1);if(Kt=!1,l&&!s.disabled&&(d?h||(o=kt!==Tt):Yt===this||(this.lastPutMode=Bt.checkPull(this,l,Mt,t))&&c.checkPut(this,l,Mt,t))){if(i="vertical"===this._getDirection(t,a),e=lt(Mt),O("dragOverValid"),ge.eventCanceled)return f;if(o)return kt=Tt,T(),this._hideClone(),O("revert"),ge.eventCanceled||(qt?Tt.insertBefore(Mt,qt):Tt.appendChild(Mt)),q(!0);var m=ut(r,s.draggable);if(!m||function(t,e,n){var o=lt(ut(n.el,n.options.draggable));return e?t.clientX>o.right+10||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+10}(t,i,this)&&!m.animated){if(m===Mt)return q(!1);if(m&&r===t.target&&(a=m),a&&(n=lt(a)),!1!==ye(Tt,r,Mt,e,a,n,t,!!a))return T(),m&&m.nextSibling?r.insertBefore(Mt,m.nextSibling):r.appendChild(Mt),kt=r,_(),q(!0)}else if(m&&function(t,e,n){var o=lt(ht(n.el,0,n.options,!0));return e?t.clientX<o.left-10||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-10||t.clientY<o.bottom&&t.clientX<o.left}(t,i,this)){var v=ht(r,0,s,!0);if(v===Mt)return q(!1);if(n=lt(a=v),!1!==ye(Tt,r,Mt,e,a,n,t,!1))return T(),r.insertBefore(Mt,v),kt=r,_(),q(!0)}else if(a.parentNode===r){n=lt(a);var g,y,b,w=Mt.parentNode!==r,S=!function(t,e,n){var o=n?t.left:t.top,i=n?t.right:t.bottom,r=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,c=n?e.width:e.height;return o===a||i===s||o+r/2===a+c/2}(Mt.animated&&Mt.toRect||e,a.animated&&a.toRect||n,i),x=i?"top":"left",E=dt(a,"top","top")||dt(Mt,"top","top"),L=E?E.scrollTop:void 0;if(Gt!==a&&(y=n[x],ee=!1,ne=!S&&s.invertSwap||w),g=function(t,e,n,o,i,r,a,s){var c=o?t.clientY:t.clientX,l=o?n.height:n.width,d=o?n.top:n.left,h=o?n.bottom:n.right,u=!1;if(!a)if(s&&Zt<l*i){if(!ee&&(1===Vt?c>d+l*r/2:c<h-l*r/2)&&(ee=!0),ee)u=!0;else if(1===Vt?c<d+Zt:c>h-Zt)return-Vt}else if(c>d+l*(1-i)/2&&c<h-l*(1-i)/2)return function(t){return pt(Mt)<pt(t)?1:-1}(e);return(u=u||a)&&(c<d+l*r/2||c>h-l*r/2)?c>d+l/2?1:-1:0}(t,a,n,i,S?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,ne,Gt===a),0!==g){var D=pt(Mt);do{D-=g,b=kt.children[D]}while(b&&("none"===rt(b,"display")||b===Ot))}if(0===g||b===a)return q(!1);Gt=a,Vt=g;var C=a.nextElementSibling,M=!1,k=ye(Tt,r,Mt,e,a,n,t,M=1===g);if(!1!==k)return 1!==k&&-1!==k||(M=1===k),ie=!0,setTimeout(we,30),T(),M&&!C?r.appendChild(Mt):a.parentNode.insertBefore(Mt,M?C:a),E&&yt(E,0,L-E.scrollTop),kt=Mt.parentNode,void 0===y||ne||(Zt=Math.abs(y-lt(a)[x])),_(),q(!0)}if(r.contains(Mt))return q(!1)}return!1}function O(s,c){Dt(s,p,B({evt:t,isOwner:d,axis:i?"vertical":"horizontal",revert:o,dragRect:e,targetRect:n,canSort:h,fromSortable:u,target:a,completed:q,onMove:function(n,o){return ye(Tt,r,Mt,e,n,lt(n),t,o)},changed:_},c))}function T(){O("dragOverAnimationCapture"),p.captureAnimationState(),p!==u&&u.captureAnimationState()}function q(e){return O("dragOverCompleted",{insertion:e}),e&&(d?l._hideClone():l._showClone(p),p!==u&&(it(Mt,Yt?Yt.options.ghostClass:l.options.ghostClass,!1),it(Mt,s.ghostClass,!0)),Yt!==p&&p!==ge.active?Yt=p:p===ge.active&&Yt&&(Yt=null),u===p&&(p._ignoreWhileAnimating=a),p.animateAll((function(){O("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(a===Mt&&!Mt.animated||a===r&&!a.animated)&&(Gt=null),s.dragoverBubble||t.rootEl||a===document||(Mt.parentNode[wt]._isOutsideThisEl(t.target),!e&&me(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function _(){Pt=pt(Mt),Ht=pt(Mt,s.draggable),Ct({sortable:p,name:"change",toEl:r,newIndex:Pt,newDraggableIndex:Ht,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Q(document,"mousemove",this._onTouchMove),Q(document,"touchmove",this._onTouchMove),Q(document,"pointermove",this._onTouchMove),Q(document,"dragover",me),Q(document,"mousemove",me),Q(document,"touchmove",me)},_offUpEvents:function(){var t=this.el.ownerDocument;Q(t,"mouseup",this._onDrop),Q(t,"touchend",this._onDrop),Q(t,"pointerup",this._onDrop),Q(t,"touchcancel",this._onDrop),Q(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;Pt=pt(Mt),Ht=pt(Mt,n.draggable),Dt("drop",this,{evt:t}),kt=Mt&&Mt.parentNode,Pt=pt(Mt),Ht=pt(Mt,n.draggable),ge.eventCanceled||(Qt=!1,ne=!1,ee=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ee(this.cloneId),Ee(this._dragStartId),this.nativeDraggable&&(Q(document,"drop",this),Q(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),J&&rt(document.body,"user-select",""),rt(Mt,"transform",""),t&&(Jt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ot&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),(Tt===kt||Yt&&"clone"!==Yt.lastPutMode)&&Nt&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),Mt&&(this.nativeDraggable&&Q(Mt,"dragend",this),be(Mt),Mt.style["will-change"]="",Jt&&!Qt&&it(Mt,Yt?Yt.options.ghostClass:this.options.ghostClass,!1),it(Mt,this.options.chosenClass,!1),Ct({sortable:this,name:"unchoose",toEl:kt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Tt!==kt?(Pt>=0&&(Ct({rootEl:kt,name:"add",toEl:kt,fromEl:Tt,originalEvent:t}),Ct({sortable:this,name:"remove",toEl:kt,originalEvent:t}),Ct({rootEl:kt,name:"sort",toEl:kt,fromEl:Tt,originalEvent:t}),Ct({sortable:this,name:"sort",toEl:kt,originalEvent:t})),Yt&&Yt.save()):Pt!==It&&Pt>=0&&(Ct({sortable:this,name:"update",toEl:kt,originalEvent:t}),Ct({sortable:this,name:"sort",toEl:kt,originalEvent:t})),ge.active&&(null!=Pt&&-1!==Pt||(Pt=It,Ht=jt),Ct({sortable:this,name:"end",toEl:kt,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Dt("nulling",this),Tt=Mt=kt=Ot=qt=Nt=_t=At=Rt=Xt=Jt=Pt=Ht=It=jt=Gt=Vt=Yt=Bt=ge.dragged=ge.ghost=ge.clone=ge.active=null,re.forEach((function(t){t.checked=!0})),re.length=Wt=zt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Mt&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)et(t=n[o],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Se(t));return e},sort:function(t,e){var n={},o=this.el;this.toArray().forEach((function(t,e){var i=o.children[e];et(i,this.options.draggable,o,!1)&&(n[t]=i)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(o.removeChild(n[t]),o.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return et(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var o=Et.modifyOption(this,t,e);n[t]=void 0!==o?o:e,"group"===t&&ue(n)},destroy:function(){Dt("destroy",this);var t=this.el;t[wt]=null,Q(t,"mousedown",this._onTapStart),Q(t,"touchstart",this._onTapStart),Q(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Q(t,"dragover",this),Q(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),te.splice(te.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!At){if(Dt("hideClone",this),ge.eventCanceled)return;rt(Nt,"display","none"),this.options.removeCloneOnHide&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),At=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(At){if(Dt("showClone",this),ge.eventCanceled)return;Mt.parentNode!=Tt||this.options.group.revertClone?qt?Tt.insertBefore(Nt,qt):Tt.appendChild(Nt):Tt.insertBefore(Nt,Mt),this.options.group.revertClone&&this.animate(Mt,Nt),rt(Nt,"display",""),At=!1}}else this._hideClone()}},ae&&$(document,"touchmove",(function(t){(ge.active||Qt)&&t.cancelable&&t.preventDefault()})),ge.utils={on:$,off:Q,css:rt,find:st,is:function(t,e){return!!et(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:gt,closest:et,toggleClass:it,clone:bt,index:pt,nextTick:xe,cancelNextTick:Ee,detectDirection:he,getChild:ht},ge.get=function(t){return t[wt]},ge.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(ge.utils=B(B({},ge.utils),t.utils)),Et.mount(t)}))},ge.create=function(t,e){return new ge(t,e)},ge.version="1.15.0";var Le,De,Ce,Me,ke,Oe,Te=[],qe=!1;function _e(){Te.forEach((function(t){clearInterval(t.pid)})),Te=[]}function Ne(){clearInterval(Oe)}var Ae=gt((function(t,e,n,o){if(e.scroll){var i,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,c=e.scrollSpeed,l=ct(),d=!1;De!==n&&(De=n,_e(),Le=e.scroll,i=e.scrollFn,!0===Le&&(Le=mt(n,!0)));var h=0,u=Le;do{var p=u,f=lt(p),m=f.top,v=f.bottom,g=f.left,y=f.right,b=f.width,w=f.height,S=void 0,x=void 0,E=p.scrollWidth,L=p.scrollHeight,D=rt(p),C=p.scrollLeft,M=p.scrollTop;p===l?(S=b<E&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),x=w<L&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(S=b<E&&("auto"===D.overflowX||"scroll"===D.overflowX),x=w<L&&("auto"===D.overflowY||"scroll"===D.overflowY));var k=S&&(Math.abs(y-r)<=s&&C+b<E)-(Math.abs(g-r)<=s&&!!C),O=x&&(Math.abs(v-a)<=s&&M+w<L)-(Math.abs(m-a)<=s&&!!M);if(!Te[h])for(var T=0;T<=h;T++)Te[T]||(Te[T]={});Te[h].vx==k&&Te[h].vy==O&&Te[h].el===p||(Te[h].el=p,Te[h].vx=k,Te[h].vy=O,clearInterval(Te[h].pid),0==k&&0==O||(d=!0,Te[h].pid=setInterval(function(){o&&0===this.layer&&ge.active._onTouchMove(ke);var e=Te[this.layer].vy?Te[this.layer].vy*c:0,n=Te[this.layer].vx?Te[this.layer].vx*c:0;"function"==typeof i&&"continue"!==i.call(ge.dragged.parentNode[wt],n,e,t,ke,Te[this.layer].el)||yt(Te[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&u!==l&&(u=mt(u,!1)));qe=d}}),30),Ie=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,i=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var c=n||i;a();var l=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Pe(){}function je(){}Pe.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=ht(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Ie},X(Pe,{pluginName:"revertOnSpill"}),je.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Ie},X(je,{pluginName:"removeOnSpill"}),ge.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?$(document,"dragover",this._handleAutoScroll):this.options.supportPointer?$(document,"pointermove",this._handleFallbackAutoScroll):e.touches?$(document,"touchmove",this._handleFallbackAutoScroll):$(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?Q(document,"dragover",this._handleAutoScroll):(Q(document,"pointermove",this._handleFallbackAutoScroll),Q(document,"touchmove",this._handleFallbackAutoScroll),Q(document,"mousemove",this._handleFallbackAutoScroll)),Ne(),_e(),clearTimeout(nt),nt=void 0},nulling:function(){ke=De=Le=qe=Oe=Ce=Me=null,Te.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(o,i);if(ke=t,e||this.options.forceAutoScrollFallback||F||z||J){Ae(t,this.options,r,e);var a=mt(r,!0);!qe||Oe&&o===Ce&&i===Me||(Oe&&Ne(),Oe=setInterval((function(){var r=mt(document.elementFromPoint(o,i),!0);r!==a&&(a=r,_e()),Ae(t,n.options,r,e)}),10),Ce=o,Me=i)}else{if(!this.options.bubbleScroll||mt(r,!0)===ct())return void _e();Ae(t,this.options,mt(r,!1),!1)}}},X(t,{pluginName:"scroll",initializeByDefault:!0})}),ge.mount(je,Pe);var He=ge;function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){Xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Be(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Be(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Be(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var We=localStorage.getItem("ih-step-2")?JSON.parse(localStorage.getItem("ih-step-2")):{},ze=function(){var t=document.querySelectorAll(".section-content");t.length&&(t.forEach((function(t,e){return We[t.dataset.id].position=e})),localStorage.setItem("ih-step-2",JSON.stringify(We)))},Fe=function(){var t=document.querySelectorAll(".section-content-text");t.length&&t.forEach((function(t){var e=t.closest(".section-content").querySelector(".section-content-title-input");t.removeEventListener("keyup",Ue),t.removeEventListener("change",Ue),t.removeEventListener("blur",Ue),t.addEventListener("keyup",Ue),t.addEventListener("change",Ue),t.addEventListener("blur",Ue),e&&(e.removeEventListener("keyup",Ue),e.removeEventListener("change",Ue),e.removeEventListener("blur",Ue),e.removeEventListener("keyup",Ge),e.removeEventListener("change",Ge),e.addEventListener("keyup",Ue),e.addEventListener("change",Ue),e.addEventListener("blur",Ue),e.addEventListener("keyup",Ge),e.addEventListener("change",Ge))}))},Ue=function(){Je()?(Dn(3),Mn(2)):(Cn(),Mn(2,0))},Je=function(){var t=document.querySelectorAll(".section-content-text"),e=!0;if(t.length)return t.forEach((function(t,n){var o=t.closest(".section-content"),i=o.querySelector(".section-content-title"),r=i.querySelector(".section-content-title-input"),a=t.value,s=o.dataset.id,c=o.classList.contains("custom")?1:"";We[s]=Re(Re({},We[s]),{},r?{title:r.value}:{title:i.innerText}),(!a||r&&!r.value)&&(e=!1),We[s].text=a,We[s].position=n,We[s].custom=c,localStorage.setItem("ih-step-2",JSON.stringify(We))})),e},Ge=function(t){var e=t.target,n=e.value,o=e.closest(".section-content").dataset.id;document.querySelector('.sections-added-list .section[data-id="'.concat(o,'"] .section-label')).innerHTML=n||"Свій заголовок"},Ve=function(t){var e=t.target,n=e.value,o=document.querySelector(".symbols-count-typed"),i=parseInt(document.querySelector(".symbols-count-allowed").innerText.trim());if(o&&i){if(localStorage.setItem("ih-step-3",JSON.stringify({epitaph:n})),e.classList.contains("clear-on-focus")&&(e.value="",e.classList.remove("clear-on-focus")),!n)return Cn(),Mn(3,0),void(o.innerHTML=0);n.length>i&&(e.value=n.substring(0,i)),o.innerHTML=e.value.length,Mn(3),Dn(4)}},Ze=function(){return!!document.querySelector(".epitaph-text").value};function $e(t){return function(t){if(Array.isArray(t))return Qe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var Ke,tn,en,nn,on=localStorage.getItem("ih-step-4")?JSON.parse(localStorage.getItem("ih-step-4")):{photos:[],videos:[],links:[{url:"",title:"",position:0}]},rn=0,an=function(t,e){var n="mask0_".concat(1e4*Math.random(),"_").concat(1e4*Math.random());return'<div class="droparea-img-loaded">\n\t\t<img src="'.concat(t.url,'" alt="').concat(e,'" />\n\t\t<div class="droparea-img-delete flex align-center justify-center" data-id="').concat(t.attachId,'">\n\t\t\t<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<mask id="').concat(n,'" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="5" y="3" width="14" height="18">\n\t\t\t\t\t<path fill-rule="evenodd" clip-rule="evenodd" d="M14.79 3.29L15.5 4H18C18.55 4 19 4.45 19 5C19 5.55 18.55 6 18 6H6C5.45 6 5 5.55 5 5C5 4.45 5.45 4 6 4H8.5L9.21 3.29C9.39 3.11 9.65 3 9.91 3H14.09C14.35 3 14.61 3.11 14.79 3.29ZM6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V9C18 7.9 17.1 7 16 7H8C6.9 7 6 7.9 6 9V19ZM9 9H15C15.55 9 16 9.45 16 10V18C16 18.55 15.55 19 15 19H9C8.45 19 8 18.55 8 18V10C8 9.45 8.45 9 9 9Z" fill="black"/>\n\t\t\t\t</mask>\n\t\t\t\t<g mask="url(#').concat(n,')">\n\t\t\t\t\t<rect width="24" height="24" fill="currentColor"/>\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t</div>\n\t</div>')},sn=function(t){t.stopPropagation(),v()},cn=function(t,e){if(!d()){h(!0);var n=e.querySelector(".droparea-inner"),o=e.querySelector(".droparea-images"),i=t.target.closest(".droparea-img-delete").dataset.id,r=new FormData;r.append("action","ih_ajax_delete_memory_photo"),r.append("id",i),u(r).then((function(e){if(e)switch(e.success){case!0:g(e.data.msg),t.target.closest(".droparea-img-loaded").remove(),o.querySelectorAll(".droparea-img-loaded:not(.droparea-video-loaded)").length||(o.classList.add("hidden"),n.classList.remove("hidden")),Sn(),on.photos.forEach((function(t,e){t==i&&on.photos.splice(e,1)})),localStorage.setItem("ih-step-4",JSON.stringify(on));break;case!1:g(e.data.msg,"error")}h(!1),v()}))}},ln=function(t){var e=t.target,n=e.value;e.closest(".video-link-row").querySelector(".video-link-upload").disabled=!n},dn=function(t,e){e=JSON.parse(e),t&&e.length&&e.forEach((function(e){var n='<div class="droparea-thumb">\n\t\t\t<img class="droparea-thumb-img" src="'.concat(e,'" alt="" />\n\t\t</div>');t.insertAdjacentHTML("beforeend",n)}))},hn=function(t){if(!d()){h(!0);var e=t.target.closest(".droparea-img-delete").dataset.id,n=t.target.closest(".droparea-img-delete").dataset.isVideo,o=new FormData,i=document.querySelector(".droparea-videos");o.append("action","ih_ajax_delete_memory_photo"),o.append("id",e),o.append("video",n),u(o).then((function(n){if(n)switch(n.success){case!0:if(t.target.closest(".droparea-video-loaded").remove(),!i.querySelectorAll(".droparea-video-loaded").length){b(i),y(document.querySelector(".droparea-video .droparea-inner"));var o=document.querySelector(".droparea-thumbs"),r=o.cloneNode(!0);document.querySelector(".droparea-video").append(r),un(),o.remove()}on.videos.forEach((function(t,n){t.id==e&&on.videos.splice(n,1)})),localStorage.setItem("ih-step-4",JSON.stringify(on));break;case!1:g(n.data.msg,"error")}h(!1),v()}))}},un=function(){var t=document.querySelector(".file-load-poster");t&&(t.removeEventListener("change",pn),t.addEventListener("change",pn))},pn=function(t){var e=$e(t.target.files),n=document.querySelector(".droparea-thumbs-list");if(e.length){var o=e[0];if(o.size>5242880)return g("Розмір повинен бути меньше 5 мб","error"),!1;o.type.startsWith("image/")?fn(o,n):g("Тільки зображення - файл ".concat(o.name," не є зображенням"),"error")}},fn=function(t,e){if(t&&e){var n=new FormData;d()||(h(!0),n.append("action","ih_ajax_upload_custom_poster"),n.append("file",t),u(n).then((function(n){if(n)switch(n.success){case!0:var o='<div class="droparea-thumb">\n\t\t\t\t\t\t<img class="droparea-thumb-img" src="'.concat(n.data.url,'" alt="').concat(t.name,'" />\n\t\t\t\t\t</div>');e.insertAdjacentHTML("beforeend",o),g("Обкладинка ".concat(t.name," успішно завантажено"));break;case!1:g(n.data.msg,"error")}h(!1)})))}},mn=function(){var t=document.querySelectorAll(".step-media-link");t.length&&t.forEach((function(t){var e=t.querySelector('input[id^="media-link-"]'),n=t.querySelector('input[id^="media-name-link-"]');e&&n&&(e.removeEventListener("keyup",vn),e.removeEventListener("change",vn),e.removeEventListener("blur",vn),e.addEventListener("change",vn),e.addEventListener("keyup",vn),e.addEventListener("blur",vn),n.removeEventListener("keyup",vn),n.removeEventListener("change",vn),n.removeEventListener("blur",vn),n.addEventListener("change",vn),n.addEventListener("keyup",vn),n.addEventListener("blur",vn))}))},vn=function(t){var e=t.target,n=e.value,o=e.closest("label"),i=e.closest(".step-media-link"),r=i.dataset.id,a="url"===e.dataset.type?"url":"title",s="url"===a?i.querySelector('input[data-type="title"]'):i.querySelector('input[data-type="url"]'),c=document.querySelector(".media-links-add");n?o.classList.remove("error"):o.classList.add("error"),n&&s.value?(i.classList.add("filled"),c.classList.remove("hidden")):1===document.querySelectorAll(".step-media-link").length&&(i.classList.remove("filled"),c.classList.add("hidden")),on.links[r][a]=n,localStorage.setItem("ih-step-4",JSON.stringify(on))},gn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return'<div class="step-media-link flex flex-wrap'.concat(t?" filled":"",'" data-id="').concat(t,'">\n\t\t\t<label for="media-link-').concat(t,'" class="label dark half">\n\t\t\t\t<span class="label-text">Посилання</span>\n\t\t\t\t<input\n\t\t\t\t\tid="media-link-').concat(t,'"\n\t\t\t\t\tname="media-link-').concat(t,'"\n\t\t\t\t\ttype="text"\n\t\t\t\t\tdata-type="url"\n\t\t\t\t\tplaceholder="Додати посилання"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<label for="media-name-link-').concat(t,'" class="label dark half end">\n\t\t\t\t<span class="label-text">Назва посилання</span>\n\t\t\t\t<input\n\t\t\t\t\tid="media-name-link-').concat(t,'"\n\t\t\t\t\tname="media-name-link-').concat(t,'"\n\t\t\t\t\ttype="text"\n\t\t\t\t\tdata-type="title"\n\t\t\t\t\tplaceholder="Додати посилання"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<button class="media-link-delete" title="Видалити посилання" type="button">\n\t\t\t\t<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<mask id="mask_link_').concat(t,'" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="5" y="3" width="14" height="18">\n\t\t\t\t\t\t<path fill-rule="evenodd" clip-rule="evenodd" d="M14.79 3.29L15.5 4H18C18.55 4 19 4.45 19 5C19 5.55 18.55 6 18 6H6C5.45 6 5 5.55 5 5C5 4.45 5.45 4 6 4H8.5L9.21 3.29C9.39 3.11 9.65 3 9.91 3H14.09C14.35 3 14.61 3.11 14.79 3.29ZM6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V9C18 7.9 17.1 7 16 7H8C6.9 7 6 7.9 6 9V19ZM9 9H15C15.55 9 16 9.45 16 10V18C16 18.55 15.55 19 15 19H9C8.45 19 8 18.55 8 18V10C8 9.45 8.45 9 9 9Z" fill="black"/>\n\t\t\t\t\t</mask>\n\t\t\t\t\t<g mask="url(#mask_link_').concat(t,')">\n\t\t\t\t\t\t<rect width="24" height="24" fill="currentColor"/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>')},yn=function(){var t=document.querySelectorAll(".media-link-delete");t.length&&t.forEach((function(t){t.removeEventListener("click",bn),t.addEventListener("click",bn)}))},bn=function(t){var e=t.target.closest(".step-media-link");on.links.splice(e.dataset.id,1),e.remove(),localStorage.setItem("ih-step-4",JSON.stringify(on)),document.querySelectorAll(".step-media-link").length||(document.querySelector(".step-media-links").innerHTML=gn(),mn(),yn(),wn(),document.querySelector(".media-links-add").classList.add("hidden"))},wn=function(){var t=document.querySelectorAll(".droparea-img-loaded:not(.droparea-video-loaded)"),e=document.querySelectorAll(".droparea-video-loaded"),n=document.querySelectorAll(".step-media-link");return!(t.length<4||(on.photos=[],t.forEach((function(t){return on.photos.push(t.querySelector(".droparea-img-delete").dataset.id)})),e.length&&(on.videos=[],e.forEach((function(t){var e=t.querySelector("video"),n=e?e.dataset.posterId:"";on.videos.push({poster:n||"",id:t.querySelector(".droparea-img-delete").dataset.id})}))),n.length&&(on.links=[],n.forEach((function(t){var e=t.querySelector('input[id^="media-link-"]'),n=t.querySelector('input[id^="media-name-link-"]');e&&n&&on.links.push({url:e.value,title:n.value,position:t.dataset.id})}))),localStorage.setItem("ih-step-4",JSON.stringify(on)),0))},Sn=function(){wn()?(Mn(4),Dn(5)):(Cn(),Mn(4,0))},xn=localStorage.getItem("ih-step-5")?JSON.parse(localStorage.getItem("ih-step-5")):{},En=function(t){var e=t.target,n=e.value,o=e.name;n?e.classList.remove("error"):e.classList.add("error"),xn[o]=n,localStorage.setItem("ih-step-5",JSON.stringify(xn)),Ln()?(Dn(6),Mn(5)):(Cn(),Mn(5,0))},Ln=function(){var t=document.querySelectorAll(".new-memory-coords input"),e=document.querySelector(".new-memory-coords textarea"),n=!0;if(t.length&&e)return xn.how_to_find=e.value,(e.classList.contains("error")||e.required&&!e.value)&&(n=!1),t.forEach((function(t){var e=t.name,o=t.value;(t.classList.contains("error")||t.required&&!o)&&(n=!1),xn[e]=o})),localStorage.setItem("ih-step-5",JSON.stringify(xn)),n},Dn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;nn.removeAttribute("disabled"),nn.dataset.next="".concat(t)},Cn=function(){nn.setAttribute("disabled","true"),nn.dataset.next=""},Mn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=tn.querySelector('[data-part="'.concat(t,'"]'));n&&(n.querySelector(".new-memory-progress-inner").style.width="".concat(e,"%"))},kn=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 1:t=j;break;case 2:t=Je;break;case 3:t=Ze;break;case 4:t=wn;break;case 5:t=Ln;break;default:t=w}t()?(Mn(e),Dn(e+1)):(Mn(e,0),Cn())};document.addEventListener("DOMContentLoaded",(function(){var t,e,n,o,i,r,a,s,l,v,w,S,E,L,C,M,k,O,T;Ke=document.querySelector(".new-memory-footer"),tn=document.querySelector(".new-memory-progress-bar"),en=document.querySelector(".new-memory-prev-step"),nn=document.querySelector(".new-memory-next-step"),Ke&&tn&&en&&nn&&(kn(),(t=document.querySelectorAll(".new-memory-theme")).length&&t.forEach((function(t){t.addEventListener("click",(function(){var e=document.querySelector(".new-memory-theme.active");e&&e.classList.remove("active"),t.classList.add("active"),localStorage.setItem("ih-step-0",JSON.stringify({theme:t.dataset.value})),Dn()}))})),nn.addEventListener("click",(function(){if(!nn.disabled){var t=parseInt(nn.dataset.next);if(t&&!d()){h(!0);var e=new FormData;e.append("action","ih_ajax_save_data_step_".concat(t-1)),e.append("stepData",localStorage.getItem("ih-step-".concat(t-1))),u(e).then((function(e){if(e)switch(e.success){case!0:(function(t){document.querySelector(".new-memory-step.active").classList.remove("active"),document.querySelector("#new-memory-step-".concat(t)).classList.add("active"),en.classList.remove("hidden"),en.setAttribute("data-prev",t-1),kn(t)})(t),6===t&&(function(){var t=localStorage.getItem("ih-step-1")?JSON.parse(localStorage.getItem("ih-step-1")):null;if(t){var e=t.cropped||"",n=t.firstname,o=t.fathername,i=t.lastname,r=new Date(t["date-of-birth"]),a=r.getDate()<10?"0".concat(r.getDate()):r.getDate(),s=r.getMonth()+1<10?"0".concat(r.getMonth()+1):r.getMonth()+1,c="".concat(a,".").concat(s,".").concat(r.getFullYear()),l=new Date(t["date-of-death"]),d=l.getDate()<10?"0".concat(l.getDate()):l.getDate(),h=l.getMonth()+1<10?"0".concat(l.getMonth()+1):l.getMonth()+1,u="".concat(d,".").concat(h,".").concat(l.getFullYear());e&&(document.querySelector(".page-created-thumb-img").innerHTML='<img src="'.concat(e,'" alt="').concat(n," ").concat(o," ").concat(i,'" />')),document.querySelector(".page-created-firstname").innerHTML="".concat(n," ").concat(o),document.querySelector(".page-created-lastname").innerHTML=i,document.querySelector(".page-created-dates").innerHTML="".concat(c," - ").concat(u),document.querySelector(".new-memory-footer").classList.add("hidden"),localStorage.removeItem("ih-step-0"),localStorage.removeItem("ih-step-1"),localStorage.removeItem("ih-step-2"),localStorage.removeItem("ih-step-3"),localStorage.removeItem("ih-step-4"),localStorage.removeItem("ih-step-5")}}(),setTimeout((function(){return window.location.href=e.data.redirect}),3e3));break;case!1:g(e.data.msg,"error")}h(!1)}))}}})),(e=document.querySelectorAll(".new-memory-lang")).length&&e.forEach((function(t){t.addEventListener("click",(function(){document.querySelector(".new-memory-lang.active").classList.remove("active"),t.classList.add("active"),P.lang=t.dataset.lang,localStorage.setItem("ih-step-1",JSON.stringify(P))}))})),o=document.querySelector(".photo-popup"),i=document.querySelector("#photo"),r=document.querySelector(".popup-photo"),a=document.querySelector(".popup-save-photo"),s=document.querySelector(".new-memory-main-info .filename"),o&&i&&r&&a&&s&&(i.addEventListener("change",(function(){var t=new FileReader,e=i.files[0];n=e.name,t.readAsDataURL(e),t.onload=function(t){r.src=t.target.result,o.classList.remove("hidden"),p("#photo-popup"),A(f(),{reserveScrollBarGap:!0}),D=new(x())(r,{aspectRatio:302/389,movable:!1,rotatable:!1,scalable:!1,zoomable:!1,zoomOnTouch:!1})}})),o.addEventListener("click",(function(t){var e=t.target;e.className&&(e.classList.contains("popup")||e.classList.contains("popup-discard-photo"))&&(o.classList.add("hidden"),I(f()),D&&D.destroy())})),a.addEventListener("click",(function(){var t=new FormData;o.classList.add("hidden"),I(f()),t.append("action","ih_ajax_upload_main_photo"),D.getCroppedCanvas().toBlob((function(e){d()||(h(!0),t.append("cropped",e,n),u(t).then((function(t){if(t)switch(t.success){case!0:s.innerHTML=t.data.short_filename,s.closest(".label").classList.add("added"),P.cropped=t.data.url,localStorage.setItem("ih-step-1",JSON.stringify(P)),j()?(Dn(2),Mn(1)):(Cn(),Mn(1,0));break;case!1:console.error(t.data.msg)}h(!1),D.destroy()})))}))}))),function(){var t=document.querySelectorAll('.new-memory-main-info input:not([type="file"])');if(t.length){t.forEach((function(t){t.addEventListener("change",(function(t){return e(t)})),t.addEventListener("keyup",(function(t){return e(t)})),t.addEventListener("blur",(function(t){return e(t)}))}));var e=function(t){var e=t.target,n=e.value,o=e.name;n?e.classList.remove("error"):e.classList.add("error"),P[o]=n,localStorage.setItem("ih-step-1",JSON.stringify(P)),j()?(Dn(2),Mn(1)):(Cn(),Mn(1,0))}}}(),en.addEventListener("click",(function(){if(!en.classList.contains("hidden")){var t=parseInt(en.dataset.prev);(t||"0"==t)&&(document.querySelector(".new-memory-step.active").classList.remove("active"),document.querySelector("#new-memory-step-".concat(t)).classList.add("active"),Mn(t+1,0),kn(t),0==t?en.classList.add("hidden"):en.setAttribute("data-prev",t-1),nn.setAttribute("data-next",t+1))}})),l=document.querySelector(".sections-sidebar"),v=document.querySelector(".sections-content"),l&&v&&l.addEventListener("click",(function(t){var e=t.target;if(e.closest(".section-add")||e.className&&e.classList.contains(".section-add")){var n=document.querySelector(".sections-added-list"),o=e.closest(".section"),i=o.dataset.thumb||null,r=o.cloneNode(!0),a=v.querySelector(".section-content").cloneNode(!0),s=a.querySelector(".section-content-text"),c=9999*Math.random()+"_"+9999*Math.random();o.remove(),n.append(r),a.querySelector("textarea").innerText="",a.querySelector(".section-content-title").innerText=r.querySelector(".section-label").innerText,a.querySelector('[id^="content-drag-"]').id="content-drag-".concat(c),a.querySelector('[mask^="url(#content-drag-"]').setAttribute("mask","url(#content-drag-".concat(c,")")),a.querySelector('[id^="content-remove-"]').id="content-remove-".concat(c),a.querySelector('[mask^="url(#content-remove-"]').setAttribute("mask","url(#content-remove-".concat(c,")")),a.setAttribute("data-id",r.dataset.id),s.value="",v.append(a),i&&(a.classList.add("custom"),a.querySelector(".section-content-title").innerHTML='<input class="section-content-title-input" placeholder="Придумайте заголовок" />',a.insertAdjacentHTML("beforeend",'<img class="section-content-thumb" src="'.concat(i,'" alt="" />'))),setTimeout((function(){return a.click()}),10),Fe(),Ue()}})),function(){var t=document.querySelector(".sections-sidebar"),e=document.querySelector(".sections-content");t&&e&&t.addEventListener("click",(function(t){var n=t.target;if(n.closest(".section-remove")||n.className&&n.classList.contains(".section-remove")){var o=document.querySelector(".sections-list"),i=n.closest(".section"),r=i.dataset.id,a=document.querySelectorAll(".sections-added-list .section"),s=e.querySelector('.section-content[data-id="'.concat(r,'"]'));if(!a.length||a.length<2)return;if(s.querySelector(".section-content-text").value&&!confirm("Дійсно видалити цю секцію?"))return;var c=i.cloneNode(!0);for(var l in c.querySelector(".section-label").innerText=c.dataset.title,o.append(c),i.remove(),s.remove(),We)l==r&&delete We[l];localStorage.setItem("ih-step-2",JSON.stringify(We)),Ue()}}))}(),function(){var t=document.querySelector(".sections-sidebar"),e=document.querySelector(".sections-content");t&&e&&e.addEventListener("click",(function(t){var e=t.target;if(e.closest(".section-remove")||e.className&&e.classList.contains(".section-remove")){var n=document.querySelector(".sections-list"),o=e.closest(".section-content"),i=o.dataset.id,r=document.querySelector('.sections-added-list .section[data-id="'.concat(i,'"]')),a=document.querySelectorAll(".sections-added-list .section");if(!a.length||a.length<2)return;if(o.querySelector(".section-content-text").value&&!confirm("Дійсно видалити цю секцію?"))return;var s=r.cloneNode(!0);for(var c in n.append(s),r.remove(),o.remove(),We)c==i&&delete We[c];localStorage.setItem("ih-step-2",JSON.stringify(We)),Ue()}}))}(),function(){var t=document.querySelector(".sections-content");t&&(t.addEventListener("click",(function(e){var n=e.target;if(n.closest(".section-content")||n.className&&n.classList.contains(".section-content")){var o=n.closest(".section-content"),i=t.querySelector(".section-content.active");i&&i.classList.remove("active"),o.classList.add("active"),"INPUT"!==n.tagName&&o.querySelector(".section-content-text").focus()}})),document.addEventListener("click",(function(e){var n=e.target,o=t.querySelector(".section-content.active");o&&(n.closest(".section-content")||!n.className||n.classList.contains(".section-content")||o.classList.remove("active"))})))}(),w=document.querySelector(".sections-added-list"),S=document.querySelector(".sections-content"),He.create(w,{handle:".section-drag",onEnd:function(t){var e=t.item.dataset.id,n=t.oldIndex,o=t.newIndex,i=n<o?2:1,r=S.querySelector('.section-content[data-id="'.concat(e,'"]')),a=r.cloneNode(!0),s=S.querySelector(".section-content:nth-child(".concat(o+i,")"));s?s.parentNode.insertBefore(a,s):S.append(a),r.remove(),ze()}}),He.create(S,{handle:".section-drag",onEnd:function(t){var e=t.item.dataset.id,n=t.oldIndex,o=t.newIndex,i=n<o?2:1,r=w.querySelector('.section[data-id="'.concat(e,'"]')),a=r.cloneNode(!0),s=w.querySelector(".section:nth-child(".concat(o+i,")"));s?s.parentNode.insertBefore(a,s):w.append(a),r.remove(),ze()}}),Fe(),(E=document.querySelector(".epitaph-text"))&&(localStorage.setItem("ih-step-3",JSON.stringify({epitaph:E.value})),E.addEventListener("keyup",Ve),E.addEventListener("change",Ve),E.addEventListener("focus",Ve),E.addEventListener("blur",Ve)),(C=(L=document.querySelector(".droparea-photo")).querySelectorAll(".droparea-img-delete")).length&&C.forEach((function(t){t.addEventListener("click",(function(t){m(t.target,sn,(function(){return cn(t,L)}))}))})),function(){var t=document.querySelector(".droparea-video").querySelectorAll(".droparea-img-delete");t.length&&t.forEach((function(t){t.addEventListener("click",(function(t){m(t.target,sn,(function(){return hn(t)}))}))}))}(),function(){var t,e=document.querySelector(".droparea-photo"),n=document.querySelectorAll(".file-photo");["dragenter","dragover","dragleave","drop"].forEach((function(t){document.addEventListener(t,(function(t){return t.preventDefault()}))})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,(function(){return e.classList.add("dragover")}))})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(){return e.classList.remove("dragover")}))}));var o=function(n){(t="INPUT"===n.target.tagName?$e(n.target.files):$e(n.dataTransfer.files)).length&&t.forEach((function(t){if(t.size>52428800)return console.error("Не вдалося завантажити фото ".concat(t.name)),!1;t.type.startsWith("image/")?function(t,e){if(t&&e){var n=e.querySelector(".droparea-loader"),o=n.querySelector(".droparea-loader-percents span"),i=n.querySelector("progress"),r=n.querySelector(".droparea-loader-cancel"),a=e.querySelector(".droparea-inner"),s=e.querySelector(".droparea-images"),l=new FormData,d=new XMLHttpRequest;l.append("file",t),l.append("action","ih_ajax_upload_memory_photo"),d.upload.addEventListener("progress",(function(t){var e=t.loaded,r=t.total,s=parseInt(e/r*100);a.classList.add("hidden"),n.classList.remove("hidden"),o.innerHTML=s,i.value=s})),r.addEventListener("click",(function(){d.abort(),i.value=0,setTimeout((function(){n.classList.add("hidden"),document.querySelectorAll(".droparea-img-loaded:not(.droparea-video-loaded)").length||a.classList.remove("hidden")}),500)})),d.open("POST",c,!0),d.send(l),d.onload=function(){if(n.classList.add("hidden"),200==d.status){var o=JSON.parse(d.response).data,i="";1==o.success&&(s.classList.remove("hidden"),i=an(o,t.name),s.querySelector(".droparea-images-load").insertAdjacentHTML("beforebegin",i),g("Фото ".concat(t.name," успішно завантажено")),s.querySelector('.droparea-img-delete[data-id="'.concat(o.attachId,'"]')).addEventListener("click",(function(t){return m(t.target,sn,(function(){return cn(t,e)}))})),Sn(),on.photos.push(o.attachId),localStorage.setItem("ih-step-4",JSON.stringify(on)))}else document.querySelectorAll(".droparea-img-loaded:not(.droparea-video-loaded)").length?s.classList.remove("hidden"):a.classList.remove("hidden"),g("Помилка ".concat(d.status,". Повторіть спробу пізніше."),"warning")}}}(t,e):g("Тільки зображення - файл ".concat(t.name," не є зображенням"),"warning")}))};e.addEventListener("drop",o),n.forEach((function(t){return t.addEventListener("change",o)}))}(),function(){var t,e=document.querySelector(".droparea-video"),n=document.querySelectorAll(".file-video");["dragenter","dragover","dragleave","drop"].forEach((function(t){document.addEventListener(t,(function(t){return t.preventDefault()}))})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,(function(){return e.classList.add("dragover")}))})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(){return e.classList.remove("dragover")}))}));var o=function(n){if((t="INPUT"===n.target.tagName?$e(n.target.files):$e(n.dataTransfer.files)).length&&!d()){h(!0);var o=document.createElement("video");if(o.src=URL.createObjectURL(t[0]),o.ondurationchange=function(){return rn=function(t){if((t=Math.floor(t))&&!(t<1)){if(t<60)return"00:00:".concat(t);var e=Math.floor(t/3600),n=Math.floor(t/60%60),o=Math.floor(t%60);return e=e<10?"0".concat(e):e,n=n<10?"0".concat(n):n,o=o<10?"0".concat(o):o,"".concat(e,":").concat(n,":").concat(o)}}(o.duration)},t[0].size>1073741824)return g("Не більше 1 гб","error"),!1;t[0].type.startsWith("video/")?function(t,e){if(t&&e){var n=e.querySelector(".droparea-loader"),o=n.querySelector(".droparea-loader-percents span"),i=n.querySelector("progress"),r=n.querySelector(".droparea-loader-cancel"),a=e.querySelector(".droparea-inner"),s=e.querySelector(".droparea-videos"),l=e.querySelector(".droparea-thumbs"),d=new FormData,u=new XMLHttpRequest;d.append("file",t),d.append("action","ih_ajax_upload_memory_video"),u.upload.addEventListener("progress",(function(t){var e=t.loaded,r=t.total,s=parseInt(e/r*100);a.classList.add("hidden"),n.classList.remove("hidden"),o.innerHTML=s,i.value=s})),r.addEventListener("click",(function(){u.abort(),i.value=0,setTimeout((function(){a.classList.remove("hidden"),n.classList.add("hidden")}),500)})),u.open("POST",c,!0),u.send(d),u.onload=function(){if(n.classList.add("hidden"),200==u.status){var e=JSON.parse(u.response).data;if(1==e.success){if(document.querySelectorAll(".droparea-video-loaded").length){var o=l.cloneNode(!0);document.querySelector(".droparea-videos-load").append(o),un(),b(document.querySelector(".droparea-videos-load-inner")),y(o),l.remove(),dn(o.querySelector(".droparea-thumbs-list"),e.shots)}else l.classList.remove("hidden"),dn(l.querySelector(".droparea-thumbs-list"),e.shots);g("Файл ".concat(t.name," успішно завантажено"))}}else document.querySelectorAll(".droparea-video-loaded").length?s.classList.remove("hidden"):a.classList.remove("hidden"),g("Помилка ".concat(u.status,". Повторіть спробу пізніше."),"warning");h(!1)}}}(t[0],e):g("Тільки відеофайли - файл ".concat(t[0].name," не відео"),"error")}};e.addEventListener("drop",o),n.forEach((function(t){return t.addEventListener("change",o)}))}(),(M=document.querySelectorAll('input[name="video-link"]')).length&&M.forEach((function(t){t.addEventListener("change",ln),t.addEventListener("keyup",ln),t.addEventListener("blur",ln)})),function(){var t=document.querySelectorAll(".video-link-upload");t.length&&t.forEach((function(t){t.addEventListener("click",(function(e){if(!d()){h(!0);var n=e.target.closest(".video-link-row").querySelector("input"),o=n.value,i=new FormData;o&&(i.append("action","ih_ajax_upload_video_link"),i.append("link",o),u(i).then((function(e){if(e)switch(e.success){case!0:n.value="",t.disabled=!0,g(e.data.msg);break;case!1:g(e.data.msg,"error")}h(!1)})))}}))}))}(),un(),(k=document.querySelector(".droparea-video"))&&k.addEventListener("click",(function(t){var e=t.target,n=document.querySelector(".droparea-thumb.active");e.closest(".droparea-thumb")&&(n&&n.classList.remove("active"),e.closest(".droparea-thumb").classList.add("active"))})),(O=document.querySelector(".droparea-video"))&&O.addEventListener("click",(function(t){var e=t.target,n=document.querySelector(".droparea-thumb.active");if(n&&!d()&&e.className&&e.classList.contains("droparea-thumbs-save")){h(!0);var o=n.querySelector(".droparea-thumb-img").src,i=new FormData;i.append("action","ih_ajax_set_poster"),i.append("src",o),u(i).then((function(t){if(t)switch(t.success){case!0:g(t.data.msg),b(document.querySelector(".droparea-thumbs")),(a=document.querySelectorAll(".droparea-thumb")).length&&a.forEach((function(t){return t.remove()})),e=t.data,n=o,i=document.querySelector(".droparea-videos"),r=function(t,e){var n,o,i="mask0_".concat(1e4*Math.random(),"_").concat(1e4*Math.random());return'<div class="droparea-img-loaded droparea-video-loaded">\n\t\t<div class="droparea-video-wrapper">\n\t\t\t<video src="'.concat(t.url,'" poster="').concat(e,'"></video>\n\t\t\t<div\n\t\t\t\tclass="droparea-img-delete flex align-center justify-center"\n\t\t\t\tdata-id="').concat(t.attachId,'"\n\t\t\t\tdata-is-video="1"\n\t\t\t>\n\t\t\t\t<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<mask id="').concat(i,'" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="5" y="3" width="14" height="18">\n\t\t\t\t\t\t<path fill-rule="evenodd" clip-rule="evenodd" d="M14.79 3.29L15.5 4H18C18.55 4 19 4.45 19 5C19 5.55 18.55 6 18 6H6C5.45 6 5 5.55 5 5C5 4.45 5.45 4 6 4H8.5L9.21 3.29C9.39 3.11 9.65 3 9.91 3H14.09C14.35 3 14.61 3.11 14.79 3.29ZM6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V9C18 7.9 17.1 7 16 7H8C6.9 7 6 7.9 6 9V19ZM9 9H15C15.55 9 16 9.45 16 10V18C16 18.55 15.55 19 15 19H9C8.45 19 8 18.55 8 18V10C8 9.45 8.45 9 9 9Z" fill="black"/>\n\t\t\t\t\t</mask>\n\t\t\t\t\t<g mask="url(#').concat(i,')">\n\t\t\t\t\t\t<rect width="24" height="24" fill="currentColor"/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="droparea-video-title">').concat((n=t.filename,o=/(?:\.([^.]+))?$/.exec(n)[1],(n=n.replace(/[_\-]/g," ")).substring(0,n.length-o.length-1)),'</div>\n\t\t<div class="droparea-video-duration">').concat(rn,"</div>\n\t</div>")}(e,n),i.querySelector(".droparea-videos-load").insertAdjacentHTML("beforebegin",r),i.querySelector('.droparea-img-delete[data-id="'.concat(e.attachId,'"]')).addEventListener("click",(function(t){m(t.target,sn,(function(){return hn(t)}),"Дійсно видалити відео?")})),on.videos.push({id:e.attachId,poster:e.posterId}),localStorage.setItem("ih-step-4",JSON.stringify(on)),document.querySelectorAll(".droparea-video-loaded").length>1?y(document.querySelector(".droparea-videos-load-inner")):y(document.querySelector(".droparea-videos"));break;case!1:g(t.data.msg,"error")}var e,n,i,r,a;h(!1)}))}})),mn(),(T=document.querySelector(".media-links-add"))&&T.addEventListener("click",(function(){var t=document.querySelectorAll(".step-media-link").length;document.querySelector(".step-media-links").insertAdjacentHTML("beforeend",gn(t)),mn(),yn(),wn()})),yn(),function(){var t=document.querySelectorAll(".new-memory-coords input"),e=document.querySelector(".new-memory-coords textarea");t.length&&e&&(t.forEach((function(t){t.addEventListener("change",En),t.addEventListener("keyup",En),t.addEventListener("blur",En)})),e.addEventListener("change",En),e.addEventListener("keyup",En),e.addEventListener("blur",En))}(),function(){var t=document.querySelector(".legend-tip"),e=document.querySelector("#coords-popup"),n=document.querySelector("#coords-popup .coords-popup-close");t&&e&&n&&(t.addEventListener("click",(function(){p("#coords-popup"),A(f(),{reserveScrollBarGap:!0}),y(e)})),n.addEventListener("click",(function(){b(e),I(f())})))}())}))}()}();