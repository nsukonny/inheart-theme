jQuery(document).ready((function(e){e.fn.lettering=function(t){return this.each((function(){var t=e(this).text().replace(/\s+/g," ").split("");console.log(t),e(this).css({visibility:"hidden",overflow:"hidden",position:"relative",width:"100vw"}),e(this).height(e(this).height());for(var i="",s=0;s<t.length;s++)i+="<span>"+t[s]+"</span>";e(this).html(i);var o=[];e(this).find("span").each((function(t,i){o.push({top:e(this).get(0).offsetTop,left:e(this).get(0).offsetLeft})})),console.log(o),e(this).find("span").each((function(t,i){e(this).css({top:o[t].top,left:o[t].left,animationDelay:.1*t+"s"})})),e(this).find("span").addClass("loaded"),e(this).css({visibility:"visible"})}))},e(".single-memory-name").lettering(),e(".single-memory-fight__start-description").outerHeight()>156&&e(".single-memory-fight__item-more").removeClass("hidden"),e(".single-memory-fight__section--over3").click((function(){"1"==e(this).attr("data-modal")&&(e(".single-memory-fight__modal").removeClass("hidden"),e("body").addClass("no-scroll"))})),e(".single-memory-fight__modal__close").click((function(){e(".single-memory-fight__modal").addClass("hidden"),e("body").removeClass("no-scroll")})),e(".single-memory-fight__section canvas").each((function(){var t=e(this).width(),i=e(this).height(),s=["#000000","#4c4636","#2a2519","#3b3629","#433e2f","#4c4636"],o=e(this).get(0).getContext("2d");o.canvas.width=t,o.canvas.height=i;for(var a=0;a<t;a+=30)for(var h=0;h<i;h+=30)o.fillStyle=s[Math.floor(5*Math.random())],2==Math.floor(3*Math.random())&&o.fillRect(a,h,30,30)})),e(window).on("scroll",(function(){if(e(".single-memory-fight").length){var t=e(window).scrollTop(),i=e(".single-memory-fight").offset().top,s=e(".single-memory-fight").height(),o=Math.min(s,Math.max(0,t-i))/s;o<.25?(e(".single-memory-fight__section--over1").css("opacity",o/.25),e(".single-memory-fight__section--over3").css("cursor","pointer").attr("data-modal","1")):o<.5?(e(".single-memory-fight__section--over2").css("opacity",(o-.25)/.25),e(".single-memory-fight__section--over3").css("cursor","default").attr("data-modal","0")):(e(".single-memory-fight__section--over3").css("opacity",(o-.5)/.25),e(".single-memory-fight__section--over3").css("cursor","default").attr("data-modal","0"))}})),"undefined"!=typeof mapboxgl&&"undefined"!=typeof MapboxGeocoder&&e(".mapbox").each((function(){var t=e(this).attr("data-location");mapboxgl.accessToken=e(this).attr("data-key");var i=new mapboxgl.Map({container:e(this).attr("id"),center:[e(this).attr("data-long"),e(this).attr("data-lat")],zoom:17,attributionControl:!1,style:"mapbox://styles/alex-anthracite/clssv42xu00wk01qx2r2gbmpr",hash:!1});if(t&&"string"==typeof t){var s=new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,marker:!1,showSearch:!1});i.addControl(s),s.on("result",(function(e){var t=e.result.center;i.flyTo({center:t,zoom:12})})),s.query(t)}})),e(".single-memory-rewards__modal__close").click((function(){e(this).closest(".single-memory-rewards__modal").addClass("hidden")})),e(".single-memory-rewards__items__more-btn").click((function(){e(".single-memory-rewards__items-row.hidden:first").removeClass("hidden")})),e(".single-memory-rewards__item-description").each((function(){var t=e(this);t.height()>140&&(t.siblings(".single-memory-rewards__item-more").show(),t.height(144))})),e(".single-memory-rewards__item").click((function(){if(e(this).find(".single-memory-rewards__item-description").height()>140){var t=e(this).attr("data-id");e('.single-memory-rewards__modal[data-id="'+t+'"]').removeClass("hidden")}})),e(".single-memory-top").on("mousemove",(function(t){var i=t.clientX,s=t.clientY;e(".single-memory-top__bg path").each((function(){var t=this.getBoundingClientRect(),o=t.left+t.width/2,a=t.top+t.height/2,h=Math.sqrt(Math.pow(o-i,2)+Math.pow(a-s,2));h<100?e(this).addClass("highlighted-1").removeClass("highlighted-2 highlighted-3 highlighted"):h<250?e(this).addClass("highlighted-2").removeClass("highlighted-1 highlighted-3 highlighted"):h<500?e(this).addClass("highlighted-3").removeClass("highlighted-1 highlighted-2 highlighted"):e(this).removeClass("highlighted-1 highlighted-2 highlighted-3").addClass("highlighted")}))}))}));