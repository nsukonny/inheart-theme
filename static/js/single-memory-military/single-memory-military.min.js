jQuery(document).ready((function(e){e.fn.lettering=function(i){return this.each((function(){var i=e(this).text().split("");e(this).css({visibility:"hidden",overflow:"hidden",position:"relative"}),e(this).width(e(this).width()),e(this).height(e(this).height());for(var t="",o=0;o<i.length;o++)t+="<span>"+i[o]+"</span>";e(this).html(t),e(this).find("span").each((function(i,t){e(this).css({top:e(this).get(0).offsetTop,left:e(this).get(0).offsetLeft,animationDelay:.1*i+"s"})})),e(this).find("span").addClass("loaded"),e(this).css({visibility:"visible"})}))},e(document).ready((function(){e(".single-memory-name").lettering()})),e(".single-memory-fight__section canvas").each((function(){var i=e(this).width(),t=e(this).height(),o=["#000000","#4c4636","#2a2519","#3b3629","#433e2f","#4c4636"],a=e(this).get(0).getContext("2d");a.canvas.width=i,a.canvas.height=t;for(var s=0;s<i;s+=30)for(var h=0;h<t;h+=30)a.fillStyle=o[Math.floor(5*Math.random())],2==Math.floor(3*Math.random())&&a.fillRect(s,h,30,30)})),e(window).on("scroll",(function(){var i=e(window).scrollTop(),t=e(".single-memory-fight").offset().top,o=e(".single-memory-fight").height(),a=Math.min(o,Math.max(0,i-t))/o;a<.25?e(".single-memory-fight__section--over1").css("opacity",a/.25):a<.5?e(".single-memory-fight__section--over2").css("opacity",(a-.25)/.25):e(".single-memory-fight__section--over3").css("opacity",(a-.5)/.25)})),"undefined"!=typeof mapboxgl&&"undefined"!=typeof MapboxGeocoder&&e(".mapbox").each((function(){var i=e(this).attr("data-location");mapboxgl.accessToken=e(this).attr("data-key");var t=new mapboxgl.Map({container:e(this).attr("id"),center:[e(this).attr("data-long"),e(this).attr("data-lat")],zoom:17,attributionControl:!1,style:"mapbox://styles/alex-anthracite/clssv42xu00wk01qx2r2gbmpr",hash:!0}),o=new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,marker:!1,showSearch:!1});t.addControl(o),o.on("result",(function(e){var i=e.result.center;t.flyTo({center:i,zoom:12})})),i&&"string"==typeof i&&o.query(i),e(this).attr("data-region")&&t.on("load",(function(){t.addSource("admin-1",{type:"vector",url:"mapbox://mapbox.boundaries-adm1-v4",promoteId:"mapbox_id"}),t.addLayer({id:"admin-1-fill",type:"fill",source:"admin-1","source-layer":"boundaries_admin_1",filter:["any",["==","all",["get","worldview"]],["in","UA",["get","worldview"]]],paint:{"fill-color":"#CCCCCC","fill-opacity":.5}},"waterway-label")}))})),e(".single-memory-rewards__modal__close").click((function(){e(this).closest(".single-memory-rewards__modal").addClass("hidden")})),e(".single-memory-rewards__items__more-btn").click((function(){e(".single-memory-rewards__items-row.hidden:first").removeClass("hidden")})),e(".single-memory-rewards__item-description").each((function(){var i=e(this);i.height()>140&&(i.siblings(".single-memory-rewards__item-more").show(),i.height(144))})),e(".single-memory-rewards__item").click((function(){if(e(this).find(".single-memory-rewards__item-description").height()>140){var i=e(this).attr("data-id");e('.single-memory-rewards__modal[data-id="'+i+'"]').removeClass("hidden")}})),e(".single-memory-top").on("mousemove",(function(i){var t=i.clientX,o=i.clientY;e(".single-memory-top__bg path").each((function(){var i=this.getBoundingClientRect(),a=i.left+i.width/2,s=i.top+i.height/2,h=Math.sqrt(Math.pow(a-t,2)+Math.pow(s-o,2));h<100?e(this).addClass("highlighted-1").removeClass("highlighted-2 highlighted-3 highlighted"):h<150?e(this).addClass("highlighted-2").removeClass("highlighted-1 highlighted-3 highlighted"):h<200?e(this).addClass("highlighted-3").removeClass("highlighted-1 highlighted-2 highlighted"):e(this).removeClass("highlighted-1 highlighted-2 highlighted-3").addClass("highlighted")}))}))}));